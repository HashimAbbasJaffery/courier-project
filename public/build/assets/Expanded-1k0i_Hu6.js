import{H as e,D as t,c as n,i as a,a as i,d as s,f as l,r as o,o as d,j as r,I as c,w as p,k as u,A as g,B as h,C as v,F as m,m as f,p as b,t as x,s as _,n as y}from"./vendor-DCAUJ3rR.js";import{a as k}from"./data-C-1G2k3o.js";import{_ as w}from"./app-DDeM6aGO.js";import"./ui-qR5y7ijB.js";const C={key:0,class:"auth-required"},z={class:"auth-required-content"},A=["href"],S=w({__name:"AuthCheck",setup(o){const d=e(),r=t(()=>d.props.auth);return(e,t)=>r.value.isAuthenticated?a(e.$slots,"default",{key:1},void 0,!0):(i(),n("div",C,[s("div",z,[t[1]||(t[1]=s("div",{class:"auth-icon"},[s("i",{class:"ri-lock-line"})],-1)),t[2]||(t[2]=s("h3",null,"Authentication Required",-1)),t[3]||(t[3]=s("p",null,"You must be logged in to access this page.",-1)),s("a",{href:e.route("login"),class:"btn btn-primary"},t[0]||(t[0]=[s("i",{class:"ri-login-box-line me-2"},null,-1),l(" Login Now ",-1)]),8,A)])]))}},[["__scopeId","data-v-e4029ff5"]]),L={class:"container-xxl container-p-y flex-grow-1"},O={class:"row"},R={class:"col-12"},D={class:"card"},N={class:"card-body"},M={key:0,class:"loading-overlay"},P={class:"row mb-3"},I={class:"col-md-6"},E={class:"input-group"},j={class:"col-md-6 text-md-end"},B={class:"d-flex align-items-center justify-content-end gap-2"},F={class:"table-responsive"},H={class:"table align-middle",style:{"font-size":"12px",border:"1px solid #e9ecef"}},q={style:{"text-align":"center","padding-left":"5px","padding-right":"5px"}},K=["onClick"],T={class:"v-btn__content","data-no-activator":""},$={style:{"padding-left":"0px","padding-right":"0px"}},U={style:{"padding-left":"5px"}},V={style:{"padding-left":"0px","text-align":"center"}},Y={style:{"font-weight":"bold"}},G={style:{"font-size":"10px","background-color":"#faf5ff",padding:"2px 5px","border-radius":"10px","margin-top":"20px",border:"1px solid #ede7f6",color:"#7e57c2"}},Z={style:{"padding-left":"0px","padding-right":"0px"}},J={style:{"font-size":"10px",padding:"2px 5px","margin-top":"20px","border-radius":"10px"}},Q={class:"text-truncate",style:{"max-width":"160px","padding-left":"0px"}},W={style:{"font-weight":"bold"}},X={style:{"font-size":"10px","background-color":"#faf5ff",padding:"2px 5px","border-radius":"10px","margin-top":"20px",border:"1px solid #ede7f6",color:"#7e57c2"}},ee={class:"address-cell",style:{width:"3%"}},te=["data-shipment-id","onMouseenter","onMouseleave"],ne=["innerHTML"],ae={style:{"font-size":"10px","background-color":"#faf5ff",padding:"2px 5px","border-radius":"10px","margin-top":"20px",border:"1px solid #ede7f6",color:"#7e57c2"}},ie={style:{width:"10%","padding-left":"0px","padding-right":"0px","text-align":"center"}},se={style:{"font-weight":"bold"}},le={style:{"font-size":"10px","background-color":"#faf5ff",padding:"2px 5px","border-radius":"10px","margin-top":"20px",border:"1px solid #ede7f6",color:"#7e57c2"}},oe={style:{"padding-left":"0px","padding-right":"0px","text-align":"center"}},de={class:"link-btn"},re={style:{"font-size":"10px","background-color":"#faf5ff",padding:"2px 5px","border-radius":"10px","margin-top":"20px",border:"1px solid #ede7f6",color:"#7e57c2"}},ce={key:0,class:"detail-row"},pe={colspan:"9",style:{"background-color":"#f8f9fa",padding:"0"}},ue={class:"detail-content"},ge={class:"row"},he={class:"col-12"},ve={class:"table-responsive",style:{"padding-left":"160px"}},me={class:"table table-sm nested-table"},fe={key:0},be={key:1},xe={style:{color:"#000000","font-size":"12px"}},_e={style:{color:"#000000","font-size":"12px"}},ye={style:{color:"#000000","font-size":"12px"}},ke={style:{color:"#000000","font-size":"12px"}},we={style:{color:"#000000","font-size":"12px"}},Ce={style:{color:"#000000","font-size":"12px"}},ze={style:{color:"#000000","font-size":"12px"}},Ae={key:0,class:"badge",style:{"background-color":"#c8e6c2",color:"#2e7d32"}},Se={key:1,class:"text-muted"},Le={class:"d-flex justify-content-between align-items-center p-3"},Oe={class:"text-muted"},Re={class:"d-flex align-items-center gap-2"},De=["disabled"],Ne=["disabled"],Me={class:"d-flex align-items-center gap-1"},Pe=["onClick"],Ie=["disabled"],Ee=["disabled"],je={class:"tooltip-content"},Be={class:"tooltip-body"},Fe=w({__name:"Expanded",setup(e){const a=o([]),w=o({}),C=o({}),z=o(""),A=o(1),Fe=o(25),He=o(null),qe=o({}),Ke=o([{id:1,order_id:"ORD001",tracking_number:"LEO10001",status:"Delivered",consignee_name:"Ahmed Ali Khan",consignee_phone:"+92-300-1234567",consignee_address:"House #123, Block 6, PECHS, Karachi",destination_city:"Karachi",cod_amount:25e3,picking_time:"2024-01-15",shippingCharges:{billed_charges:500,receivable:2e4}},{id:2,order_id:"ORD002",tracking_number:"LEO10002",status:"Dispatched",consignee_name:"Fatima Zahra",consignee_phone:"+92-300-2345678",consignee_address:"Flat #45, Building A, Gulberg III, Lahore",destination_city:"Lahore",cod_amount:2e4,picking_time:"2024-01-14",shippingCharges:{billed_charges:400,receivable:17e3}},{id:3,order_id:"ORD003",tracking_number:"LEO10003",status:"In Transit",consignee_name:"Muhammad Hassan",consignee_phone:"+92-300-3456789",consignee_address:"Shop #12, Main Bazar, Islamabad",destination_city:"Islamabad",cod_amount:15e3,picking_time:"2024-01-13",shippingCharges:{billed_charges:300,receivable:12e3}},{id:4,order_id:"ORD004",tracking_number:"LEO10004",status:"Pending",consignee_name:"Sara Ahmed",consignee_phone:"+92-300-4567890",consignee_address:"Villa #78, Phase 5, DHA, Karachi",destination_city:"Karachi",cod_amount:3e4,picking_time:null,shippingCharges:{billed_charges:600,receivable:25e3}},{id:5,order_id:"ORD005",tracking_number:"LEO10005",status:"Pickup Request Sent",consignee_name:"Ali Raza",consignee_phone:"+92-300-5678901",consignee_address:"Office #23, Business District, Faisalabad",destination_city:"Faisalabad",cod_amount:18e3,picking_time:null,shippingCharges:{billed_charges:450,receivable:15e3}},{id:6,order_id:"ORD006",tracking_number:"LEO10006",status:"Shipment Picked",consignee_name:"Ayesha Khan",consignee_phone:"+92-300-6789012",consignee_address:"House #90, Sector G, Bahria Town, Rawalpindi",destination_city:"Rawalpindi",cod_amount:22e3,picking_time:"2024-01-16",shippingCharges:{billed_charges:550,receivable:18e3}},{id:7,order_id:"ORD007",tracking_number:"LEO10007",status:"Cancelled",consignee_name:"Usman Ali",consignee_phone:"+92-300-7890123",consignee_address:"Shop #45, Mall Road, Peshawar",destination_city:"Peshawar",cod_amount:12e3,picking_time:null,last_activity:"2024-01-12",shipping_charges:{shipment_charges:350,receivable:8e3}},{id:8,order_id:"ORD008",tracking_number:"LEO10008",status:"Returned to Shipper",consignee_name:"Hina Malik",consignee_phone:"+92-300-8901234",consignee_address:"Flat #67, Block 8, Clifton, Karachi",destination_city:"Karachi",cod_amount:28e3,picking_time:"2024-01-10",shippingCharges:{billed_charges:700,receivable:22e3}}]),Te=e=>e??0===e?new Intl.NumberFormat("en-PK").format(Number(e)):"—";function $e(e){if(!e)return"N/A";const t=new Date(e);return`${String(t.getDate()).padStart(2,"0")}-${t.toLocaleString("en-US",{month:"short"})}-${String(t.getFullYear()).slice(-2)}`}const Ue={"Drop Off at Express Center":"drop-off","Shipment Picked":"shipment-picked","Being Return":"being-return","Ready for Return":"ready-for-return",Dispatched:"dispatched",Delivered:"delivered",Pending:"pending",Missroute:"missroute","Returned to shipper":"returned-to-shipper","Arrived at Station":"arrived-at-station","Assign to Courier":"assign-to-courier","Consignment Booked":"consignment-booked",Cancelled:"cancelled","Pickup Request Sent":"pickup-request-sent","48 Hours Auto Canceled":"auto-canceled","Pickup Request not Send":"pickup-request-not-sent","In Transit":"dispatched"},Ve=async e=>{if(!w.value[e]){C.value[e]=!0;try{const t=await k.get(`/api/shipments/${e}/vendors`);w.value[e]=t.data.data||[]}catch(t){w.value[e]=!1}finally{C.value[e]=!1}}},Ye=()=>Ke.value.length,Ge=t(()=>{if(!z.value.trim())return Ke.value;const e=z.value.toLowerCase().trim();return Ke.value.filter(t=>t.order_id?.toLowerCase().includes(e)||t.tracking_number?.toLowerCase().includes(e)||t.status?.toLowerCase().includes(e)||t.consignee_name?.toLowerCase().includes(e)||t.consignee_phone?.toLowerCase().includes(e)||t.consignee_address?.toLowerCase().includes(e)||t.destination_city?.toLowerCase().includes(e)||t.cod_amount?.toString().includes(e)||t.shippingCharges?.billed_charges?.toString().includes(e)||t.shippingCharges?.receivable?.toString().includes(e))}),Ze=t(()=>Math.ceil(Ge.value.length/Fe.value)),Je=t(()=>(A.value-1)*Fe.value),Qe=t(()=>Math.min(Je.value+Fe.value,Ge.value.length)),We=t(()=>Ge.value.slice(Je.value,Qe.value)),Xe=t(()=>{const e=[];let t=Math.max(1,A.value-Math.floor(2.5)),n=Math.min(Ze.value,t+5-1);n-t+1<5&&(t=Math.max(1,n-5+1));for(let a=t;a<=n;a++)e.push(a);return e}),et=()=>{A.value=1},tt=()=>{A.value=1},nt=e=>{e>=1&&e<=Ze.value&&(A.value=e)},at=e=>{if(!e)return"—";if(e.length<=25)return e;const t=[];for(let n=0;n<e.length;n+=25)t.push(e.substring(n,n+25));if(e.length>75){return t.slice(0,3).join("<br>")+'<br><span style="color: #6c757d; font-style: italic;">...</span>'}return t.join("<br>")},it=e=>{const t=document.querySelector(`[data-shipment-id="${e}"] .address-container`);if(t){const n=t.getBoundingClientRect();qe.value[e]={left:n.left+n.width/2,top:n.top-120}}},st=o(!1),lt=o(Ye());return d(async()=>{await(async()=>{try{st.value=!0;const e=await k.get("/api/shipments");Ke.value=e.data.data||[]}catch(e){}finally{st.value=!1}})(),lt.value=Ye()}),r(()=>{C.value={},w.value={},a.value=[]}),(e,t)=>(i(),c(S,null,{default:p(()=>[s("div",L,[s("div",O,[s("div",R,[s("div",D,[t[28]||(t[28]=s("div",{class:"card-header"},null,-1)),s("div",N,[st.value?(i(),n("div",M,t[6]||(t[6]=[s("div",{class:"loading-spinner"},null,-1),s("div",{class:"mt-3 text-muted"},"Fetching data...",-1)]))):u("",!0),s("div",P,[s("div",I,[s("div",E,[t[7]||(t[7]=s("span",{class:"input-group-text"},[s("i",{class:"ri-search-line"})],-1)),g(s("input",{type:"text",class:"form-control",placeholder:"Search shipments...","onUpdate:modelValue":t[0]||(t[0]=e=>z.value=e),onInput:et},null,544),[[h,z.value]])])]),s("div",j,[s("div",B,[t[9]||(t[9]=s("label",{class:"form-label mb-0 me-2"},"Show:",-1)),g(s("select",{class:"form-select form-select-sm",style:{width:"auto"},"onUpdate:modelValue":t[1]||(t[1]=e=>Fe.value=e),onChange:tt},t[8]||(t[8]=[s("option",{value:"10"},"10",-1),s("option",{value:"25"},"25",-1),s("option",{value:"50"},"50",-1),s("option",{value:"100"},"100",-1)]),544),[[v,Fe.value]]),t[10]||(t[10]=s("span",{class:"text-muted ms-2"},"per page",-1))])])]),s("div",F,[s("table",H,[t[22]||(t[22]=s("thead",null,[s("tr",null,[s("th",{style:{"font-size":"10px","padding-left":"5px","padding-right":"5px",width:"3%"}}),s("th",{style:{"font-size":"10px","padding-left":"5px","padding-right":"5px",width:"4%"}},"S.no"),s("th",{style:{"font-size":"10px","padding-left":"5px",width:"1%"}},"Order ID"),s("th",{style:{"font-size":"10px","padding-left":"0px",width:"15%","text-align":"center"}},"Tracking"),s("th",{style:{"font-size":"10px","padding-left":"0px"}},"Status"),s("th",{style:{"font-size":"10px","padding-left":"0px"}},"Customer Name"),s("th",{style:{"font-size":"10px","padding-left":"0px",width:"3%"}},"Address"),s("th",{style:{"font-size":"10px","padding-left":"0px"},class:"text-center"},"COD"),s("th",{style:{"font-size":"10px","padding-left":"0px"},class:"text-center"},"Recieve Amount")])],-1)),s("tbody",null,[(i(!0),n(m,null,f(We.value,(e,o)=>{return i(),n(m,{key:e.id},[s("tr",null,[s("td",q,[s("button",{type:"button",class:"v-btn v-btn--icon v-theme--light text-primary v-btn--density-comfortable v-btn--size-default v-btn--variant-text",onClick:t=>(e=>{const t=a.value.indexOf(e);t>-1?(a.value.splice(t,1),delete w.value[e],delete C.value[e]):C.value[e]||(a.value.push(e),Ve(e))})(e.id)},[t[11]||(t[11]=s("span",{class:"v-btn__overlay"},null,-1)),t[12]||(t[12]=s("span",{class:"v-btn__underlay"},null,-1)),s("span",T,[s("i",{class:b(["v-icon notranslate v-theme--light v-icon--size-default flip-in-rtl",a.value.includes(e.id)?"ri-arrow-down-s-line":"ri-arrow-right-s-line"]),"aria-hidden":"true"},null,2)])],8,K)]),s("td",$,x(o+1),1),s("td",U,x(e.order_id),1),s("td",V,[s("span",Y,x(e.tracking_number),1),t[13]||(t[13]=s("br",null,null,-1)),s("span",G,x("N/A"==$e(e.picking_time)?"Not Picked Yet":$e(e.picking_time)),1)]),s("td",Z,[s("span",{class:b(["badge",(d=e.status,Ue[d]||"pending")])},x(e.status||"—"),3),t[14]||(t[14]=s("br",null,null,-1)),s("span",J,x("N/A"==$e(e.updated_at)?"Status not changed yet":$e(e.updated_at)),1)]),s("td",Q,[s("span",W,x(e.consignee_name||"—"),1),t[15]||(t[15]=s("br",null,null,-1)),s("span",X,x(e.consignee_phone||"-"),1)]),s("td",ee,[s("div",{class:"address-container","data-shipment-id":e.id,onMouseenter:t=>{return n=e.id,void((a=e.consignee_address)&&a.length>75&&(He.value=n,y(()=>{it(n)})));var n,a},onMouseleave:t=>(e.id,void(He.value=null))},[s("span",{innerHTML:at(e.consignee_address)},null,8,ne),t[16]||(t[16]=s("br",null,null,-1)),s("span",ae,x(e.destination_city),1)],40,te)]),s("td",ie,[s("span",se,x(Te(e.cod_amount))+"/-",1),t[17]||(t[17]=s("br",null,null,-1)),s("span",le," DC "+x(Te(e?.shippingCharges?.billed_charges||0))+"/- ",1)]),s("td",oe,[s("span",de,x(Te(e?.shippingCharges?.receivable||0))+"/- ",1),t[18]||(t[18]=s("br",null,null,-1)),s("span",re,x($e(e.created_at)),1)])]),a.value.includes(e.id)?(i(),n("tr",ce,[s("td",pe,[s("div",ue,[s("div",ge,[s("div",he,[s("div",ve,[s("table",me,[t[21]||(t[21]=s("thead",null,[s("tr",null,[s("th",{style:{color:"#7e57c2","font-weight":"600","font-size":"12px"}},"Vendor Name"),s("th",{style:{color:"#7e57c2","font-weight":"600","font-size":"12px"}},"Product Name"),s("th",{style:{color:"#7e57c2","font-weight":"600","font-size":"12px"}},"Cost"),s("th",{style:{color:"#7e57c2","font-weight":"600","font-size":"12px"}},"Article Selling"),s("th",{style:{color:"#7e57c2","font-weight":"600","font-size":"12px"}},"Packaging Material"),s("th",{style:{color:"#7e57c2","font-weight":"600","font-size":"12px"}},"Article Cost"),s("th",{style:{color:"#7e57c2","font-size":"12px"}},"Profit")])],-1)),s("tbody",null,[C.value[e.id]?(i(),n("tr",fe,t[19]||(t[19]=[s("td",{colspan:"7",class:"text-center py-4"},[s("div",{class:"d-flex align-items-center justify-content-center"},[s("div",{class:"spinner-border spinner-border-sm text-primary me-2",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")]),s("span",{class:"text-muted"},"Loading vendors...")])],-1)]))):w.value[e.id]&&0!==w.value[e.id].length?(i(!0),n(m,{key:2},f(w.value[e.id],e=>(i(),n("tr",{key:e.id},[s("td",xe,x(e.vendor_name||"N/A"),1),s("td",_e,x(e.product_name||"N/A"),1),s("td",ye,x(e.cost?e.cost:"N/A"),1),s("td",ke,x(e.item_price?e.item_price:"N/A"),1),s("td",we,x(e.packaging_material||"N/A"),1),s("td",Ce,x(e.total_amount?e.total_amount:"N/A"),1),s("td",ze,[e.profit?(i(),n("span",Ae,x(e.profit),1)):(i(),n("span",Se,"N/A"))])]))),128)):(i(),n("tr",be,t[20]||(t[20]=[s("td",{colspan:"7",class:"text-center py-5"},[s("div",{class:"no-vendors-container"},[s("div",{class:"no-vendors-icon"},[s("i",{class:"ri-store-2-line"})]),s("h6",{class:"no-vendors-title"},"No Order Items Available"),s("p",{class:"no-vendors-description"}," This shipment doesn't have any order items yet. "),s("div",{class:"no-vendors-hint"},[s("i",{class:"ri-information-line"}),l(" Order items will appear here once they are added to this shipment ")])])],-1)])))])])])])])])])])):u("",!0)],64);var d}),128))])])]),t[27]||(t[27]=s("hr",{class:"my-3"},null,-1)),s("div",Le,[s("div",Oe," Showing "+x(Je.value+1)+" to "+x(Qe.value)+" of "+x(Ge.value.length)+" shipments ",1),s("div",Re,[s("button",{class:"btn btn-outline-secondary btn-sm",disabled:1===A.value,onClick:t[2]||(t[2]=e=>nt(1))},t[23]||(t[23]=[s("i",{class:"ri-skip-back-mini-line"},null,-1)]),8,De),s("button",{class:"btn btn-outline-secondary btn-sm",disabled:1===A.value,onClick:t[3]||(t[3]=e=>nt(A.value-1))},t[24]||(t[24]=[s("i",{class:"ri-arrow-left-s-line"},null,-1)]),8,Ne),s("div",Me,[(i(!0),n(m,null,f(Xe.value,e=>(i(),n("button",{key:e,class:b(["btn btn-sm",e===A.value?"btn-primary":"btn-outline-secondary"]),onClick:t=>nt(e)},x(e),11,Pe))),128))]),s("button",{class:"btn btn-outline-secondary btn-sm",disabled:A.value===Ze.value,onClick:t[4]||(t[4]=e=>nt(A.value+1))},t[25]||(t[25]=[s("i",{class:"ri-arrow-right-s-line"},null,-1)]),8,Ie),s("button",{class:"btn btn-outline-secondary btn-sm",disabled:A.value===Ze.value,onClick:t[5]||(t[5]=e=>nt(Ze.value))},t[26]||(t[26]=[s("i",{class:"ri-skip-forward-mini-line"},null,-1)]),8,Ee)])])])])])])]),He.value?(i(),n("div",{key:0,class:"address-tooltip",style:_({left:qe.value[He.value]?.left+"px",top:qe.value[He.value]?.top+"px"})},[s("div",je,[t[29]||(t[29]=s("div",{class:"tooltip-header"},[s("i",{class:"ri-map-pin-line"}),s("span",null,"Full Address")],-1)),s("div",Be,x(Ke.value.find(e=>e.id===He.value)?.consignee_address||"N/A"),1)]),t[30]||(t[30]=s("div",{class:"tooltip-arrow"},null,-1))],4)):u("",!0)]),_:1}))}},[["__scopeId","data-v-aa754ec7"]]);export{Fe as default};
