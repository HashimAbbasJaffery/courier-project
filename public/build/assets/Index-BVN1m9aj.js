import{g as a,r as e,o as t,z as l,c as i,a as d,A as n,d as s,E as o,k as r,F as c,m,f as u,B as b,n as p,t as v}from"./vendor-CEpDKWGO.js";import{a as f}from"./data-C-1G2k3o.js";import{_ as y}from"./app-CnPM6qvA.js";import"./ui-B1kR6gEw.js";const g={class:"container-xxl container-p-y flex-grow-1"},_={class:"card position-relative"},h={key:0,class:"loading-overlay"},M={class:"table-responsive text-nowrap"},x={id:"myTable",class:"table-bordered table"},k={style:{display:"flex",gap:"10px"}},w=["onClick"],C=["onClick"],P={style:{display:"flex","align-items":"center","justify-content":"center","flex-direction":"column",height:"100vh"}},T={class:"modal fade",id:"deleteMaterialModal",tabindex:"-1","aria-hidden":"true"},D={class:"modal-dialog modal-md modal-simple modal-delete-user"},B={class:"modal-content"},j={class:"modal-body"},A={method:"POST",class:"text-center"},N={class:"modal fade",id:"editMaterialModal",tabindex:"-1","aria-hidden":"true"},S={class:"modal-dialog modal-lg modal-simple modal-edit-user"},q={class:"modal-content"},E={class:"modal-body p-0"},O={method:"POST",class:"row g-5"},U={class:"col-12"},F={class:"form-floating form-floating-outline"},I=["value"],V={class:"col-12"},z={class:"form-floating form-floating-outline"},L=["value"],R={class:"col-12 text-center"},Y={class:"modal fade",id:"addMaterialModal",tabindex:"-1","aria-hidden":"true"},G={class:"modal-dialog modal-lg modal-simple modal-edit-user"},H={class:"modal-content"},J={class:"modal-body p-0"},K={method:"POST",class:"row g-5"},Q={class:"col-12"},W={class:"form-floating form-floating-outline"},X={class:"col-12"},Z={class:"form-floating form-floating-outline"},aa=y(a({__name:"Index",setup(a){const y=e([]),aa=e(""),ea=e(""),ta=e(null),la=e(null),ia=e(!0),da=e(!1);async function na(){try{da.value=!0;const a=await f.get(route("materials.get"));y.value=a.data}catch(a){}finally{da.value=!1}}async function sa(a){a.preventDefault();try{201===(await f.post(route("material.add"),{name:aa.value,price:ea.value})).status&&(closeCreateModal.click(),aa.value="",ea.value="",await na())}catch(e){}}async function oa(a){a.preventDefault();try{200===(await f.post(route("material.update",{id:la.value}),{name:edit_material_name.value,price:edit_material_price.value})).status&&(cancelMaterialButton.click(),la.value=null,await na())}catch(e){}}async function ra(a){a.preventDefault();try{200===(await f.post(route("material.delete",{id:ta.value}))).status&&(ta.value=null,cancelModalButton.click(),await na())}catch(e){}}const ca=()=>{const a=$("#myTable").DataTable();$.fn.DataTable.isDataTable("#myTable")&&a.destroy(),p(()=>{$("#myTable").DataTable({pageLength:10,lengthMenu:[[10,25,50,-1],[10,25,50,"All"]]})})};t(async()=>{await na(),ca(),ia.value=!1});let ma=!1;return l(y,()=>{ma?ca():ma=!0}),(a,e)=>(d(),i(c,null,[n(s("div",g,[s("div",_,[e[6]||(e[6]=s("div",{class:"card-header d-flex align-items-center justify-content-between ps-0 pb-0"},[s("h5",{class:"card-header"},"Manage Packaging Materials"),s("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#addMaterialModal"},"Add Material")],-1)),da.value?(d(),i("div",h,e[4]||(e[4]=[s("div",{class:"loading-spinner"},null,-1),s("div",{class:"mt-3 text-muted"},"Fetching data...",-1)]))):r("",!0),s("div",M,[s("table",x,[e[5]||(e[5]=s("thead",null,[s("tr",null,[s("th",null,"No#"),s("th",null,"Material Name"),s("th",null,"Price"),s("th",null,"Action")])],-1)),s("tbody",null,[(d(!0),i(c,null,m(y.value.data,(a,e)=>(d(),i("tr",{key:a.id},[s("td",null,v(e+1),1),s("td",null,v(a.name),1),s("td",null,v(a.price)+" RS",1),s("td",k,[s("button",{class:"btn btn-sm btn-warning editBtn",onClick:e=>la.value=a.id,"data-bs-target":"#editMaterialModal","data-bs-toggle":"modal","data-id":"1"},"Edit",8,w),s("button",{class:"btn btn-sm btn-danger deleteBtn",onClick:e=>ta.value=a.id,"data-bs-toggle":"modal","data-bs-target":"#deleteMaterialModal","data-id":"1"},"Delete",8,C)])]))),128))])])])])],512),[[o,!ia.value]]),n(s("div",P,e[7]||(e[7]=[s("span",{class:"loader"},null,-1)]),512),[[o,ia.value]]),s("div",T,[s("div",D,[s("div",B,[s("div",j,[e[9]||(e[9]=s("h4",{class:"text-center mb-4"},[u("Are you sure you want to delete "),s("span",{id:"delete_material_name"}),u("?")],-1)),s("form",A,[e[8]||(e[8]=s("input",{type:"hidden",name:"material_id",id:"delete_material_id"},null,-1)),s("button",{type:"submit",onClick:ra,name:"delete_material",class:"btn btn-danger me-3"},"Yes, Delete"),s("button",{type:"button",onClick:e[0]||(e[0]=a=>ta.value=null),id:"cancelModalButton",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Cancel")])])])])]),s("div",N,[s("div",S,[s("div",q,[s("div",E,[e[13]||(e[13]=s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"},null,-1)),e[14]||(e[14]=s("div",{class:"text-center mb-6"},[s("h4",{class:"mb-2"},"Edit Packaging Material")],-1)),s("form",O,[e[12]||(e[12]=s("input",{type:"hidden",name:"material_id",id:"edit_material_id"},null,-1)),s("div",U,[s("div",F,[s("input",{type:"text",value:y.value.data?.filter(a=>a.id==la.value)[0]?.name??"",name:"material_name",id:"edit_material_name",class:"form-control",placeholder:"Material Name",required:""},null,8,I),e[10]||(e[10]=s("label",{for:"edit_material_name"},"Name",-1))])]),s("div",V,[s("div",z,[s("input",{type:"number",step:"0.01",value:y.value.data?.filter(a=>a.id==la.value)[0]?.price??"",name:"material_price",id:"edit_material_price",class:"form-control",placeholder:"Price",required:""},null,8,L),e[11]||(e[11]=s("label",{for:"edit_material_price"},"Price",-1))])]),s("div",R,[s("button",{type:"submit",onClick:oa,name:"update_material",id:"updateMaterialButton",class:"btn btn-primary me-3"},"Update"),s("button",{type:"button",onClick:e[1]||(e[1]=a=>la.value=null),id:"cancelMaterialButton",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"Cancel")])])])])])]),s("div",Y,[s("div",G,[s("div",H,[s("div",J,[e[18]||(e[18]=s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"},null,-1)),e[19]||(e[19]=s("div",{class:"mb-6 text-center"},[s("h4",{class:"mb-2"},"Add Packaging Material")],-1)),s("form",K,[s("div",Q,[s("div",W,[n(s("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>aa.value=a),type:"text",name:"material_name",class:"form-control",placeholder:"Material Name",required:""},null,512),[[b,aa.value]]),e[15]||(e[15]=s("label",{for:"material_name"},"Name",-1))])]),s("div",X,[s("div",Z,[n(s("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>ea.value=a),type:"number",step:"0.01",name:"material_price",class:"form-control",placeholder:"Price",required:""},null,512),[[b,ea.value]]),e[16]||(e[16]=s("label",{for:"material_price"},"Price",-1))])]),s("div",{class:"col-12 text-center"},[s("button",{type:"submit",name:"add_material",onClick:sa,class:"btn btn-primary me-3"},"Submit"),e[17]||(e[17]=s("button",{type:"button",id:"closeCreateModal",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"Cancel",-1))])])])])])])],64))}}),[["__scopeId","data-v-5b1f5d2a"]]);export{aa as default};
