import{g as e,r as a,y as t,o as l,n as i,z as n,D as s,c as d,a as c,d as o,k as r,t as u,f as v,F as p,b as g,m,p as y,A as h,B as b,C as f,s as _}from"./vendor-CEpDKWGO.js";import{a as k}from"./data-C-1G2k3o.js";import{_ as x}from"./app-CnPM6qvA.js";import"./ui-B1kR6gEw.js";const C={class:"modal fade",id:"statusModal",tabindex:"-1","aria-hidden":"true"},w={class:"modal-dialog modal-dialog-centered modal-lg"},D={class:"modal-content status-modal p-0"},A={class:"sm-hero"},M={class:"sm-loc"},S={class:"sm-city"},R={class:"sm-state"},T={class:"sm-chip"},P={class:"sm-date"},N={class:"sm-loc"},O={class:"sm-city"},z={class:"sm-card"},B={class:"sm-summary"},E={class:"sm-col"},I={class:"sm-table"},Y={class:"sm-col"},L={class:"sm-table"},F={class:"sm-card sm-timeline"},q={key:0,class:"text-center py-4"},j={key:1,class:"text-center py-5"},U={key:2,class:"vtl",role:"list"},H={class:"vtl-meta"},K={class:"vtl-date"},W={class:"vtl-time"},G={class:"vtl-content"},V={class:"vtl-title"},Z={class:"vtl-sub"},X={key:0},J={key:1},Q={key:0,class:"text-center py-4"},ee={class:"modal fade",id:"cancelConfirmModal",tabindex:"-1","aria-hidden":"true"},ae={class:"modal-dialog modal-dialog-centered"},te={class:"modal-content p-4 text-center"},le={class:"modal-body"},ie={class:"d-flex justify-content-center mt-3 gap-3"},ne={class:"modal fade",id:"viewShipmentModal",tabindex:"-1","aria-hidden":"true"},se={class:"modal-dialog modal-lg modal-dialog-centered"},de={class:"modal-content p-3"},ce={class:"modal-header"},oe={class:"modal-title"},re={key:0,class:"ms-2 text-muted"},ue={class:"modal-body"},ve={key:0,class:"details-inner"},pe={class:"details-grid"},ge={class:"value"},me={class:"value"},ye={class:"value"},he={class:"value"},be={class:"value"},fe={class:"value"},_e={class:"value"},ke={class:"value"},xe={class:"value"},Ce={class:"value"},we={class:"value"},De={class:"value"},Ae={class:"modal-footer"},Me={class:"modal fade",id:"invoiceModal",tabindex:"-1","aria-hidden":"true"},Se={class:"modal-dialog modal-sm modal-dialog-centered"},Re={class:"modal-content p-3"},Te={class:"modal-body"},Pe={class:"invoice-card"},$e={class:"invoice-row",style:{"margin-bottom":"6px"}},Ne={class:"invoice-number"},Oe={class:"invoice-row"},ze={class:"invoice-row"},Be={class:"invoice-row"},Ee={class:"invoice-row"},Ie={class:"invoice-row total"},Ye={key:0,class:"container-xxl container-p-y flex-grow-1"},Le={class:"card mb-4 p-3"},Fe={id:"filterForm"},qe={class:"row"},je={class:"col-md-6"},Ue={class:"col-md-6"},He={class:"row mt-2"},Ke={class:"col-md-6"},We={id:"origin_city",class:"form-control select2"},Ge=["value"],Ve={class:"col-md-6"},Ze={id:"destination_city",class:"form-control select2"},Xe=["value"],Je={class:"card position-relative"},Qe={key:0,class:"loading-overlay"},ea={class:"table-responsive text-nowrap",id:"packetTableWrapper"},aa={id:"myTable",class:"table-bordered table align-middle",style:{"font-size":"12px"}},ta={style:{"text-align":"center","padding-left":"5px","padding-right":"0px"}},la=["checked"],ia={id:"packetTableBody"},na={style:{"text-align":"center"}},sa=["data-id","checked","onChange"],da={style:{"padding-left":"0px","padding-right":"0px"}},ca={style:{"padding-left":"5px"}},oa={style:{"padding-left":"0px"}},ra={style:{"font-weight":"bold"}},ua={style:{"font-size":"10px","background-color":"#faf5ff",padding:"2px 5px","border-radius":"10px","margin-top":"20px",border:"1px solid #ede7f6",color:"#7e57c2"}},va={style:{"padding-left":"0px","padding-right":"0px"}},pa=["onClick"],ga={style:{"font-size":"10px",padding:"2px 5px","margin-top":"20px","border-radius":"10px"}},ma={class:"text-truncate",style:{"max-width":"160px","padding-left":"0px"}},ya={style:{"font-weight":"bold"}},ha={style:{"font-size":"10px","background-color":"#faf5ff",padding:"2px 5px","border-radius":"10px","margin-top":"20px",border:"1px solid #ede7f6",color:"#7e57c2"}},ba=["data-shipment-id"],fa=["onMouseenter","onMouseleave"],_a=["innerHTML"],ka={style:{"font-size":"10px","background-color":"#faf5ff",padding:"2px 5px","border-radius":"10px","margin-top":"20px",border:"1px solid #ede7f6",color:"#7e57c2"}},xa={style:{width:"10%","padding-left":"0px","padding-right":"0px","text-align":"center"}},Ca={style:{"font-weight":"bold"}},wa={style:{"font-size":"10px","background-color":"#faf5ff",padding:"2px 5px","border-radius":"10px","margin-top":"20px",border:"1px solid #ede7f6",color:"#7e57c2"}},Da={style:{"padding-left":"0px","padding-right":"0px","text-align":"center"}},Aa=["onClick"],Ma={class:"d-flex gap-2",style:{"padding-top":"30px"}},Sa=["disabled","onClick"],Ra=["onClick"],Ta={class:"tooltip-content"},Pa={class:"tooltip-body"},$a={key:2,style:{display:"flex","align-items":"center","justify-content":"center","flex-direction":"column",height:"100vh"}},Na=x(e({__name:"Index",setup(e){a(1);const x=a([]),Na=a([]),Oa=t({dateRange:"",status:"",originCity:"",destination_city:""}),za=a(null),Ba=a(!0),Ea=a(!1),Ia=a([]),Ya=a(!1),La=a(null),Fa=a(null),qa=a({}),ja=a(null),Ua=a(!1),Ha=e=>e??0===e?new Intl.NumberFormat("en-PK").format(Number(e)):"—";function Ka(){Oa.dateRange="",Oa.status="",Oa.originCity="",Oa.destination_city=""}function Wa(e){if(!e)return"17-March-2003";const a=new Date(e);return`${String(a.getDate()).padStart(2,"0")}-${a.toLocaleString("en-US",{month:"long"})}-${a.getFullYear()}`}const Ga=e=>{if(!e)return"—";if(e.length<=25)return e;const a=[];for(let t=0;t<e.length;t+=25)a.push(e.substring(t,t+25));if(e.length>50){return a.slice(0,2).join("<br>")+'<br><span style="color: #6c757d; font-style: italic;">...</span>'}return a.join("<br>")},Va=e=>{const a=document.querySelector(`[data-shipment-id="${e}"] .address-container`);if(a){const t=a.getBoundingClientRect();qa.value[e]={left:t.left+t.width/2,top:t.top-120}}},Za=()=>{requestAnimationFrame(()=>{at()})},Xa=()=>{const e="#myTable";$.fn.DataTable.isDataTable(e)&&$(e).DataTable().destroy(),i(()=>{const a=$(e).DataTable({autoWidth:!0,scrollX:!0,pageLength:50,lengthMenu:[[50,100,250,-1],[50,100,250,"ALL"]],columnDefs:[{targets:"_all",className:"align-middle"}]}),t=()=>a.columns.adjust();$(window).on("resize.dt",t),window.addEventListener("orientationchange",t),document.addEventListener("shown.bs.modal",t),document.addEventListener("shown.bs.tab",t),a.on("draw",()=>Za()),Za()})};l(async()=>{await(async()=>{try{Ea.value=!0;const e=await k.get("/api/shipments");x.value=e.data.data||[]}catch(e){}finally{Ea.value=!1}})(),await(async()=>{try{const e=await k.get(route("courier.cities",{courier:"leopard"}));Na.value=e.data.data||[]}catch(e){}})(),i(()=>{Xa(),i(()=>{$("#origin_city").select2().on("change",e=>{Oa.originCity=$(e.target).val()}),$("#destination_city").select2().on("change",e=>{Oa.destination_city=$(e.target).val()}),$("#daterange").daterangepicker({locale:{format:"YYYY-MM-DD"}},function(e,a){Oa.dateRange=`${e.format("YYYY-MM-DD")} - ${a.format("YYYY-MM-DD")}`})})}),Ba.value=!1}),n(Oa,async e=>{const a=await k.get(route("shipments.index"),{params:{date_from:e.dateRange.split(" - ")[0],date_to:e.dateRange.split(" - ")[1],status:e.status,origin_city:e.originCity,destination_city:e.destination_city}});x.value=a.data.data||[],Xa()});const Ja=()=>{const e=x.value.map(e=>e.id);if(Ya.value){const a=new Set(e);Ia.value=Ia.value.filter(e=>!a.has(e)),Ya.value=!1}else{const a=new Set(Ia.value);e.forEach(e=>a.add(e)),Ia.value=Array.from(a),Ya.value=!0}},Qa=s(()=>{const e=new Map;return x.value.forEach(a=>{e.set(a.id,Ia.value.includes(a.id))}),e});let et=null;const at=()=>{et&&clearTimeout(et),et=setTimeout(()=>{const e=x.value.map(e=>e.id),a=e.length>0&&e.every(e=>Ia.value.includes(e));Ya.value=a,et=null},50)},tt=e=>{za.value=e,document.getElementById("cancelModalPopup")?.click()},lt=()=>{const e=Ia.value.join(","),a=e.length?route("slips.merged",{ids:e}):route("slips.merged");window.open(a,"_blank")},it={"Drop Off at Express Center":"drop-off","Shipment Picked":"shipment-picked","Being Return":"being-return","Ready for Return":"ready-for-return",Dispatched:"dispatched",Delivered:"delivered",Pending:"pending",Missroute:"missroute","Returned to shipper":"returned-to-shipper","Arrived at Station":"arrived-at-station","Assign to Courier":"assign-to-courier","Consignment Booked":"consignment-booked",Cancelled:"cancelled","Pickup Request Sent":"pickup-request-sent","48 Hours Auto Canceled":"auto-canceled","Pickup Request not Send":"pickup-request-not-sent"},nt=a(null),st=a(null),dt={Delivered:"/images/status/delivered.png",Dispatched:"/images/status/dispatched.png",Pending:"/images/status/pending.png",Cancelled:"/images/status/cancelled.png"},ct=s(()=>st.value?st.value.is_cancelled?"Cancelled":st.value.status||"—":"—");s(()=>dt[ct.value]||"/images/status/placeholder.png");const ot=async e=>{if(e)try{Ua.value=!0,ja.value=null;const a=await k.get(`/api/shipments/track/${e}`);a.data.success&&(ja.value=a.data.data,ja.value)}catch(a){}finally{Ua.value=!1}},rt=e=>{const a=Number(e);return Number.isFinite(a)?(a/1e3).toFixed(3):"—"},ut=e=>{if(!e)return"17-March-2003";try{const a=new Date(e),t=String(a.getDate()).padStart(2,"0"),l=a.toLocaleString("en-US",{month:"long"});return`${t}-${l}-${a.getFullYear()}`}catch(a){return"17-March-2003"}},vt=e=>{if(!e)return"1:00 AM";try{if(e.includes("-")||e.includes("/")){return new Date(e).toLocaleString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}if(e.includes(":")||e.includes("AM")||e.includes("PM")){const a=e.split(":");if(a.length>=2){let t=parseInt(a[0]);const l=a[1].replace(/\D/g,""),i=e.includes("PM")?"PM":"AM";return 0===t?t=12:t>12&&(t-=12),`${t}:${l.padStart(2,"0")} ${i}`}}return e}catch(a){return"1:00 AM"}};s(()=>materials.value?.data&&platforms.value?.data&&vendors.value?.data);const pt=s(()=>{if(!ja.value?.packet_list?.[0])return[];const e=ja.value.packet_list[0],a=e["Tracking Detail"]||e.tracking_detail||e.trackingDetail||[];return a.length,Array.isArray(a)?a:[]}),gt=s(()=>{const e=pt.value;return e&&0!==e.length?[...e].sort((e,a)=>{const t=e.Activity_Date||e["Activity Date"]||e.activity_date||e.activityDate||"",l=e.Activity_Time||e["Activity Time"]||e.activity_time||e.activityTime||"",i=a.Activity_Date||a["Activity Date"]||a.activity_date||a.activityDate||"",n=a.Activity_Time||a["Activity Time"]||a.activity_time||a.activityTime||"",s=new Date(`${t} ${l}`);return new Date(`${i} ${n}`)-s}):[]});return(e,a)=>(c(),d(p,null,[o("div",C,[o("div",w,[o("div",D,[o("div",A,[o("div",M,[a[5]||(a[5]=o("div",{class:"sm-label"},"From",-1)),o("div",S,u(st.value?.origin_city??"—"),1)]),o("div",R,[o("span",T,u(ct.value),1),o("div",P,u(Wa(st.value?.last_activity)),1)]),o("div",N,[a[6]||(a[6]=o("div",{class:"sm-label"},"To",-1)),o("div",O,u(st.value?.destination_city??"—"),1)])]),o("section",z,[a[15]||(a[15]=o("header",{class:"sm-card-title"},"Shipment Summary",-1)),o("div",B,[o("div",E,[o("table",I,[o("tbody",null,[o("tr",null,[a[7]||(a[7]=o("th",null,"Tracking #",-1)),o("td",null,u(st.value?.tracking_number??"—"),1)]),o("tr",null,[a[8]||(a[8]=o("th",null,"No. of pieces",-1)),o("td",null,u(ja.value?.packet_list?.[0]?.booked_packet_no_piece??st.value?.no_of_pieces??"—"),1)]),o("tr",null,[a[9]||(a[9]=o("th",null,"Shipper name",-1)),o("td",null,u(ja.value?.packet_list?.[0]?.shipment_name_eng??"ZEBTAN COLLECTION"),1)]),o("tr",null,[a[10]||(a[10]=o("th",null,"Shipper address",-1)),o("td",null,[v(u(ja.value?.packet_list?.[0]?.shipment_address??"FLAT NO 8 REHMAN MANZIL STREET NO 6 BURNS ROAD KARACHI")+" ",1),st.value?.origin_city?(c(),d(p,{key:0},[v(", "+u(st.value?.origin_city),1)],64)):r("",!0)])])])])]),o("div",Y,[o("table",L,[o("tbody",null,[o("tr",null,[a[11]||(a[11]=o("th",null,"Reference # / Order ID",-1)),o("td",null,u(ja.value?.packet_list?.[0]?.booked_packet_order_id??st.value?.order_id??"—"),1)]),o("tr",null,[a[12]||(a[12]=o("th",null,"Packet weight",-1)),o("td",null,u(rt(ja.value?.packet_list?.[0]?.booked_packet_weight??st.value?.weight))+" (Kgs)",1)]),o("tr",null,[a[13]||(a[13]=o("th",null,"Consignee name",-1)),o("td",null,u(ja.value?.packet_list?.[0]?.consignment_name_eng??st.value?.consignee_name??"—"),1)]),o("tr",null,[a[14]||(a[14]=o("th",null,"Consignee address",-1)),o("td",null,[v(u(ja.value?.packet_list?.[0]?.consignment_address??st.value?.consignee_address??"—")+" ",1),st.value?.destination_city?(c(),d(p,{key:0},[v(", "+u(st.value?.destination_city),1)],64)):r("",!0)])])])])])])]),o("section",F,[a[20]||(a[20]=o("header",{class:"sm-card-title"},"Tracking Timeline",-1)),Ua.value?(c(),d("div",q,a[16]||(a[16]=[o("div",{class:"spinner-border spinner-border-sm me-2"},null,-1),o("span",null,"Loading tracking data...",-1)]))):ja.value&&ja.value.packet_list&&0!==ja.value.packet_list.length?(c(),d("div",U,[(c(!0),d(p,null,m(gt.value,(e,t)=>(c(),d("div",{key:t,class:y(["vtl-row","is-complete"]),role:"listitem"},[o("div",H,[o("div",K,u(ut(e.Activity_Date||e["Activity Date"]||e.activity_date||e.activityDate)),1),o("div",W,u(vt(e.Activity_Time||e["Activity Time"]||e.activity_time||e.activityTime)),1)]),a[18]||(a[18]=o("div",{class:"vtl-rail"},[o("span",{class:"vtl-dot","aria-hidden":"true"})],-1)),o("div",G,[o("div",V,u(e.Staus||e.Status||e.status||"Status Update"),1),o("div",Z,[e["Reciever Name"]||e["Receiver Name"]||e.receiver_name?(c(),d("span",X," Receiver: "+u(e["Reciever Name"]||e["Receiver Name"]||e.receiver_name),1)):e.Reason||e.reason?(c(),d("span",J,"Reason: "+u(e.Reason||e.reason),1)):r("",!0)])])],2))),128)),0===pt.value.length?(c(),d("div",Q,a[19]||(a[19]=[g('<div class="no-activities-state" data-v-a1ec3cc2><div class="no-activities-icon" data-v-a1ec3cc2><i class="ri-route-line" data-v-a1ec3cc2></i></div><h6 class="no-activities-title" data-v-a1ec3cc2>No Activity Updates Yet</h6><p class="no-activities-message" data-v-a1ec3cc2> This shipment doesn&#39;t have any tracking activities recorded yet. The courier service may still be processing the shipment. </p></div>',1)]))):r("",!0)])):(c(),d("div",j,a[17]||(a[17]=[g('<div class="no-tracking-state" data-v-a1ec3cc2><div class="no-tracking-icon" data-v-a1ec3cc2><i class="ri-search-line" data-v-a1ec3cc2></i></div><h5 class="no-tracking-title" data-v-a1ec3cc2>No Tracking Information Available</h5><p class="no-tracking-message" data-v-a1ec3cc2> We couldn&#39;t find any tracking details for this shipment at the moment. This could mean the shipment is still being processed or hasn&#39;t been picked up yet. </p><div class="no-tracking-hint" data-v-a1ec3cc2><i class="ri-time-line me-1" data-v-a1ec3cc2></i><span data-v-a1ec3cc2>Tracking updates usually appear within 24-48 hours after pickup</span></div></div>',1)])))])])])]),a[75]||(a[75]=o("button",{id:"statusModalOpen","data-bs-toggle":"modal","data-bs-target":"#statusModal",style:{display:"none"}},"open",-1)),a[76]||(a[76]=o("button",{"data-bs-toggle":"modal","data-bs-target":"#cancelConfirmModal",id:"cancelModalPopup",style:{display:"none"}},"open",-1)),o("div",ee,[o("div",ae,[o("div",te,[o("div",le,[a[21]||(a[21]=g('<button type="button" class="btn-close position-absolute end-0 top-0 m-3" data-bs-dismiss="modal" aria-label="Close" data-v-a1ec3cc2></button><div class="text-danger mb-3" data-v-a1ec3cc2><i class="bi bi-exclamation-circle" style="font-size:3rem;" data-v-a1ec3cc2></i></div><h4 class="mb-2" data-v-a1ec3cc2>Are you sure?</h4><p class="text-muted" data-v-a1ec3cc2>Do you really want to cancel this shipment?</p>',4)),o("div",ie,[o("button",{onClick:a[0]||(a[0]=e=>za.value=null),id:"hideCancelModal",type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," No "),o("button",{onClick:a[1]||(a[1]=e=>(async e=>{await k.post(route("order.cancel",{tracking_number:e,courier:"leopard"})),x.value=x.value.map(a=>a.tracking_number===e?{...a,is_cancelled:!0}:a),document.getElementById("hideCancelModal")?.click()})(za.value)),type:"button",class:"btn btn-danger"},"Yes")])])])])]),a[77]||(a[77]=o("button",{id:"viewModalOpen","data-bs-toggle":"modal","data-bs-target":"#viewShipmentModal",style:{display:"none"}},"open",-1)),o("div",ne,[o("div",se,[o("div",de,[o("div",ce,[o("h5",oe,[a[22]||(a[22]=v(" Shipment Details ",-1)),La.value?(c(),d("small",re," ("+u(La.value.tracking_number||"—")+") ",1)):r("",!0)]),a[23]||(a[23]=o("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),o("div",ue,[La.value?(c(),d("div",ve,[o("div",pe,[o("div",null,[a[24]||(a[24]=o("div",{class:"label"},"Tracking #",-1)),o("div",ge,u(La.value.tracking_number||"—"),1)]),o("div",null,[a[25]||(a[25]=o("div",{class:"label"},"Order ID",-1)),o("div",me,u(La.value.order_id||"—"),1)]),o("div",null,[a[26]||(a[26]=o("div",{class:"label"},"Consignee",-1)),o("div",ye,u(La.value.consignee_name||"—"),1)]),o("div",null,[a[27]||(a[27]=o("div",{class:"label"},"Phone",-1)),o("div",he,u(La.value.consignee_phone||"—"),1)]),o("div",null,[a[28]||(a[28]=o("div",{class:"label"},"Origin → Destination",-1)),o("div",be,u(La.value.origin_city||"—")+" → "+u(La.value.destination_city||"—"),1)]),o("div",null,[a[29]||(a[29]=o("div",{class:"label"},"COD Amount",-1)),o("div",fe,u(Ha(La.value.cod_amount))+" PKR",1)]),o("div",null,[a[30]||(a[30]=o("div",{class:"label"},"Weight",-1)),o("div",_e,u(La.value.weight?La.value.weight+" g":"—"),1)]),o("div",null,[a[31]||(a[31]=o("div",{class:"label"},"Pieces",-1)),o("div",ke,u(La.value.no_of_pieces),1)]),o("div",null,[a[32]||(a[32]=o("div",{class:"label"},"Status",-1)),o("div",xe,[o("span",{class:y(["badge",it[La.value.is_cancelled?"Cancelled":La.value.status]])},u(La.value.is_cancelled?"Cancelled":La.value.status||"—"),3)])]),o("div",null,[a[33]||(a[33]=o("div",{class:"label"},"Booking Date",-1)),o("div",Ce,u(Wa(La.value.created_at)),1)]),o("div",null,[a[34]||(a[34]=o("div",{class:"label"},"Consignee Address",-1)),o("div",we,u(La.value.consignee_address),1)]),o("div",null,[a[35]||(a[35]=o("div",{class:"label"},"Advance Payment",-1)),o("div",De,u(0==La.value.advance_payment?"No Advance Payment":La.value.advance_payment),1)])])])):r("",!0)]),o("div",Ae,[a[36]||(a[36]=o("button",{class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1)),La.value&&!La.value.is_cancelled&&"Pickup Request not Send"===La.value.status?(c(),d("button",{key:0,class:"btn btn-danger",onClick:a[2]||(a[2]=e=>tt(La.value.tracking_number)),"data-bs-dismiss":"modal"}," Cancel Shipment ")):r("",!0)])])])]),a[78]||(a[78]=o("button",{id:"invoiceModalOpen","data-bs-toggle":"modal","data-bs-target":"#invoiceModal",style:{display:"none"}},"open",-1)),o("div",Me,[o("div",Se,[o("div",Re,[a[42]||(a[42]=o("div",{class:"modal-header"},[o("h5",{class:"modal-title"},"Charges Breakdown"),o("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),o("div",Te,[o("div",Pe,[a[41]||(a[41]=o("div",{class:"invoice-title"},"Invoice",-1)),o("div",$e,[a[37]||(a[37]=o("div",null,"Invoice #",-1)),o("div",Ne,u(nt.value?.shipping_charges.invoice_cheque_no),1)]),o("div",Oe,[a[38]||(a[38]=o("div",null,"Delivery Charges",-1)),o("div",null,u(nt.value?.shipping_charges.delivery),1)]),o("div",ze,[o("div",null,"Fuel ("+u(nt.value?.shipping_charges.fuel_surcharge_percentage)+"%)",1),o("div",null,u(nt.value?.shipping_charges.fuel_surcharge_amount),1)]),o("div",Be,[o("div",null,"GST ("+u(nt.value?.shipping_charges.gst)+"%)",1),o("div",null,u(nt.value?.shipping_charges.gst_amount),1)]),o("div",Ee,[a[39]||(a[39]=o("div",null,"Govt Tax (4%)",-1)),o("div",null,u(nt.value?.shipping_charges.tax_amount.toFixed(2)),1)]),o("div",Ie,[a[40]||(a[40]=o("div",null,"Total",-1)),o("div",null,u(nt.value?.shipping_charges.gross_charges),1)])])]),a[43]||(a[43]=o("div",{class:"modal-footer"},[o("button",{class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close")],-1))])])]),Ba.value?r("",!0):(c(),d("div",Ye,[o("div",Le,[o("form",Fe,[o("div",qe,[o("div",je,[a[44]||(a[44]=o("label",null,[o("strong",null,"Date Range:")],-1)),h(o("input",{type:"text","onUpdate:modelValue":a[3]||(a[3]=e=>Oa.dateRange=e),name:"daterange",id:"daterange",class:"form-control"},null,512),[[b,Oa.dateRange]])]),o("div",Ue,[a[46]||(a[46]=o("label",null,[o("strong",null,"Status:")],-1)),h(o("select",{name:"status","onUpdate:modelValue":a[4]||(a[4]=e=>Oa.status=e),id:"status",class:"form-control select2"},a[45]||(a[45]=[g('<option value="" data-v-a1ec3cc2>All Status</option><option value="Drop Off at Express Center" data-v-a1ec3cc2>Drop Off at Express Center</option><option value="Shipment Picked" data-v-a1ec3cc2>Shipment Picked</option><option value="Being Return" data-v-a1ec3cc2>Being Return</option><option value="Ready for Return" data-v-a1ec3cc2>Ready for Return</option><option value="Dispatched" data-v-a1ec3cc2>Dispatched</option><option value="Delivered" data-v-a1ec3cc2>Delivered</option><option value="Pending" data-v-a1ec3cc2>Pending</option><option value="Missroute" data-v-a1ec3cc2>Missroute</option><option value="Returned to shipper" data-v-a1ec3cc2>Returned to shipper</option><option value="Arrived at Station" data-v-a1ec3cc2>Arrived at Station</option><option value="Assign to Courier" data-v-a1ec3cc2>Assign to Courier</option><option value="Consignment Booked" data-v-a1ec3cc2>Consignment Booked</option><option value="Cancelled" data-v-a1ec3cc2>Cancelled</option><option value="Pickup Request Sent" data-v-a1ec3cc2>Pickup Request Sent</option><option value="48 Hours Auto Canceled" data-v-a1ec3cc2>48 Hours Auto Canceled</option><option value="Pickup Request not Send" data-v-a1ec3cc2>Pickup Request not Send</option>',17)]),512),[[f,Oa.status]])])]),o("div",He,[o("div",Ke,[a[48]||(a[48]=o("label",null,[o("strong",null,"Origin City:")],-1)),o("select",We,[a[47]||(a[47]=o("option",{value:""},"All Origins",-1)),(c(!0),d(p,null,m(Na.value,e=>(c(),d("option",{key:e.id+"-o",value:e.city},u(e.city),9,Ge))),128))])]),o("div",Ve,[a[50]||(a[50]=o("label",null,[o("strong",null,"Destination City:")],-1)),o("select",Ze,[a[49]||(a[49]=o("option",{value:""},"All Destinations",-1)),(c(!0),d(p,null,m(Na.value,e=>(c(),d("option",{key:e.id+"-d",value:e.city},u(e.city),9,Xe))),128))])])]),o("div",{class:"row mt-3"},[o("div",{class:"col-12"},[o("button",{onClick:Ka,type:"button",class:"btn btn-outline-secondary reset-filters-btn"},a[51]||(a[51]=[o("i",{class:"ri-refresh-line me-2"},null,-1),v(" Reset All Filters ",-1)]))])])])]),o("div",Je,[o("div",{class:"d-flex justify-content-between align-items-center px-3 pt-3"},[a[52]||(a[52]=o("h5",{class:"card-header border-0 p-0"},"Manage Booked Packets",-1)),o("div",{class:"d-flex gap-2"},[o("button",{class:"btn btn-primary",onClick:lt},"Bulk Slips")])]),Ea.value?(c(),d("div",Qe,a[53]||(a[53]=[o("div",{class:"loading-spinner"},null,-1),o("div",{class:"mt-3 text-muted"},"Fetching data...",-1)]))):r("",!0),o("div",ea,[o("table",aa,[o("thead",null,[o("tr",null,[o("th",ta,[o("input",{type:"checkbox",checked:Ya.value,onChange:Ja},null,40,la)]),a[54]||(a[54]=o("th",{style:{"font-size":"10px","padding-left":"5px","padding-right":"5px",width:"4%"}},"S.no",-1)),a[55]||(a[55]=o("th",{style:{"font-size":"10px","padding-left":"5px",width:"1%"}},"Order ID",-1)),a[56]||(a[56]=o("th",{style:{"font-size":"10px","padding-left":"0px"}},"Tracking",-1)),a[57]||(a[57]=o("th",{style:{"font-size":"10px","padding-left":"0px"}},"Status",-1)),a[58]||(a[58]=o("th",{style:{"font-size":"10px","padding-left":"0px"}},"Customer Name",-1)),a[59]||(a[59]=o("th",{style:{"font-size":"10px","padding-left":"0px",width:"15%"}},"Address",-1)),a[60]||(a[60]=o("th",{style:{"font-size":"10px","padding-left":"0px"},class:"text-center"},"COD",-1)),a[61]||(a[61]=o("th",{style:{"font-size":"10px","padding-left":"0px"},class:"text-center"},"Recieve Amount",-1)),a[62]||(a[62]=o("th",{style:{"font-size":"10px","padding-left":"0px"}},"Action",-1))])]),o("tbody",ia,[(c(!0),d(p,null,m(x.value,(e,t)=>(c(),d("tr",{key:e.id},[o("td",na,[(c(),d("input",{class:"row-check",type:"checkbox","data-id":e.id,checked:Qa.value.get(e.id),onChange:a=>{return t=e.id,a.target.checked?Ia.value.includes(t)||Ia.value.push(t):Ia.value=Ia.value.filter(e=>e!==t),void at();var t},key:`checkbox-${e.id}`},null,40,sa))]),o("td",da,u(t+1),1),o("td",ca,u(e.order_id),1),o("td",oa,[o("span",ra,u(e.tracking_number),1),a[63]||(a[63]=o("br",null,null,-1)),o("span",ua,u("N/A"==Wa(e.picking_time)?"Not Picked Yet":Wa(e.picking_time)),1)]),o("td",va,[o("span",{class:y(["badge",it[e.is_cancelled?"Cancelled":e.status]]),onClick:a=>(e=>{st.value=e,ot(e.tracking_number),document.getElementById("statusModalOpen")?.click()})(e)},u(e.is_cancelled?"Cancelled":e.status||"—"),11,pa),a[64]||(a[64]=o("br",null,null,-1)),o("span",ga,u("N/A"==Wa(e.last_activity)?"Status not changed yet":Wa(e.last_activity)),1)]),o("td",ma,[o("span",ya,u(e.consignee_name||"—"),1),a[65]||(a[65]=o("br",null,null,-1)),o("span",ha,u(e.consignee_phone||"-"),1)]),o("td",{style:{"font-size":"12px",width:"15%","padding-left":"0px"},"data-shipment-id":e.id},[o("div",{class:"address-container",onMouseenter:a=>{return t=e.id,void((l=e.consignee_address)&&l.length>50&&(Fa.value=t,i(()=>{Va(t)})));var t,l},onMouseleave:a=>(e.id,void(Fa.value=null))},[o("span",{style:{"margin-bottom":"10px"},innerHTML:Ga(e.consignee_address)},null,8,_a)],40,fa),a[66]||(a[66]=o("br",null,null,-1)),o("span",ka,u(Na.value.filter(a=>a.id==e.destination_city)[0]?.city??e.destination_city),1)],8,ba),o("td",xa,[o("span",Ca,u(Ha(e.cod_amount)),1),a[67]||(a[67]=o("br",null,null,-1)),o("span",wa,"DC "+u(Ha(e?.shipping_charges?.shipment_charges)),1)]),o("td",Da,[o("span",{style:{cursor:"pointer","font-weight":"600"},onClick:a=>(e=>{nt.value=e,document.getElementById("invoiceModalOpen")?.click()})(e)},u(Ha(e?.shipping_charges?.receivable)),9,Aa),a[68]||(a[68]=o("br",null,null,-1)),a[69]||(a[69]=o("span",{style:{"font-size":"10px","background-color":"#faf5ff",padding:"2px 5px","border-radius":"10px","margin-top":"20px",border:"1px solid #ede7f6",color:"#7e57c2"}},u("17-Mar-2025"),-1))]),o("td",Ma,["Pickup Request not Send"===e.status?(c(),d("button",{key:0,disabled:e.is_cancelled,onClick:a=>tt(e.tracking_number),style:{color:"#dc3545",border:"none",background:"none",padding:"5px"}},a[70]||(a[70]=[o("i",{class:"ri-close-line text-[28px]",style:{color:"#dc3545"}},null,-1)]),8,Sa)):r("",!0),o("button",{onClick:a=>(e=>{La.value=e,document.getElementById("viewModalOpen")?.click()})(e)},a[71]||(a[71]=[o("i",{class:"ri-eye-line text-[28px]"},null,-1)]),8,Ra)])]))),128))])])])])])),Fa.value?(c(),d("div",{key:1,class:"address-tooltip",style:_({left:qa.value[Fa.value]?.left+"px",top:qa.value[Fa.value]?.top+"px"})},[o("div",Ta,[a[72]||(a[72]=o("div",{class:"tooltip-header"},[o("i",{class:"ri-map-pin-line"}),o("span",null,"Full Address")],-1)),o("div",Pa,u(x.value.find(e=>e.id===Fa.value)?.consignee_address||"N/A"),1)]),a[73]||(a[73]=o("div",{class:"tooltip-arrow"},null,-1))],4)):(c(),d("div",$a,a[74]||(a[74]=[o("span",{class:"loader"},null,-1)])))],64))}}),[["__scopeId","data-v-a1ec3cc2"]]);export{Na as default};
