import{g as e,r as a,D as l,z as t,o as s,c as n,a as d,A as o,d as i,E as r,b as c,k as u,F as m,m as v,f as b,B as p,q as y,C as f,t as _,p as g,n as h}from"./vendor-DCAUJ3rR.js";import{a as k}from"./data-C-1G2k3o.js";import{_ as w}from"./app-C5j-1VW8.js";import"./ui-qR5y7ijB.js";const x={class:"container-xxl container-p-y flex-grow-1"},P={class:"card position-relative"},M={key:0,class:"loading-overlay"},C={class:"table-responsive text-nowrap"},V={id:"myTable",class:"table table-bordered"},N={style:{display:"flex",gap:"10px"}},U=["href"],S=["onClick"],D=["onClick"],A={style:{display:"flex","align-items":"center","justify-content":"center","flex-direction":"column",height:"100vh"}},T={class:"modal fade",id:"deleteMaterialModal",tabindex:"-1","aria-hidden":"true"},q={class:"modal-dialog modal-md modal-simple modal-delete-user"},I={class:"modal-content"},E={class:"modal-body"},B={method:"POST",class:"text-center"},F={class:"modal fade",id:"editMaterialModal",tabindex:"-1","aria-hidden":"true"},O={class:"modal-dialog modal-lg modal-simple modal-edit-user"},j={class:"modal-content"},L={class:"modal-body p-0"},R={method:"POST",class:"row g-5"},Y={class:"col-12"},z={class:"form-floating form-floating-outline"},G=["value"],H={class:"col-12 text-center"},W={class:"modal fade",id:"addMaterialModal",tabindex:"-1","aria-hidden":"true"},J={class:"modal-dialog modal-lg modal-simple modal-edit-user"},K={class:"modal-content"},Q={class:"modal-body p-0"},X={method:"POST",class:"row g-5"},Z={class:"col-12"},ee={class:"form-floating form-floating-outline"},ae={class:"modal fade",id:"updatePaymentModal",tabindex:"-1","aria-hidden":"true"},le={class:"modal-dialog",style:{"max-width":"95%",width:"95%"}},te={class:"modal-content",style:{padding:"30px"}},se={class:"modal-body p-0"},ne={class:"col-md-4"},de={class:"form-floating form-floating-outline"},oe={class:"col-md-8"},ie={class:"form-floating form-floating-outline"},re=["placeholder"],ce={class:"col-12 text-center"},ue=["disabled"],me={key:0,class:"spinner-border spinner-border-sm me-2"},ve={key:0,class:"row g-4"},be={class:"col-12"},pe={class:"card bg-light"},ye={class:"card-body"},fe={class:"row g-3"},_e={class:"col-md-6"},ge={class:"mb-0"},he={class:"col-md-6"},ke={class:"mb-0"},we={class:"col-md-6"},xe={class:"mb-0"},Pe={class:"col-md-6"},Me={class:"mb-0"},Ce={class:"col-md-6"},Ve={class:"mb-0"},Ne={class:"col-md-6"},Ue={class:"mb-0"},Se={class:"col-md-6"},De={class:"mb-0"},Ae={class:"col-md-6"},Te={class:"mb-0"},qe={class:"col-md-6"},Ie={class:"mb-0"},Ee={class:"col-md-6"},Be={class:"mb-0"},Fe={class:"badge bg-primary"},Oe={key:0,class:"col-12"},je={class:"mb-0"},Le={class:"col-12"},$e={class:"card"},Re={class:"card-body"},Ye={class:"table-responsive d-none d-md-block"},ze={class:"table table-bordered align-middle",id:"paymentItemsTable"},Ge=["onUpdate:modelValue"],He=["onUpdate:modelValue"],We=["value"],Je=["onUpdate:modelValue"],Ke=["onUpdate:modelValue"],Qe=["onUpdate:modelValue"],Xe=["onUpdate:modelValue"],Ze=["value"],ea=["value"],aa=["value"],la=["onClick","disabled"],ta={class:"table-totals"},sa={class:"totals-label"},na={class:"totals-value"},da={class:"totals-value"},oa={class:"totals-value"},ia={class:"totals-value"},ra={class:"totals-label"},ca={class:"d-block d-md-none"},ua={class:"d-flex align-items-center justify-content-between mb-2"},ma={class:"mb-0"},va=["onClick","disabled"],ba={class:"row g-2"},pa={class:"col-6"},ya=["onUpdate:modelValue"],fa=["value"],_a={class:"col-12"},ga=["onUpdate:modelValue"],ha={class:"col-6"},ka=["onUpdate:modelValue"],wa={class:"col-6"},xa=["onUpdate:modelValue"],Pa={class:"col-6"},Ma=["onUpdate:modelValue"],Ca=["value"],Va={class:"col-6"},Na=["value"],Ua={class:"col-12"},Sa={class:"alert alert-info mb-0 py-2"},Da={class:"row mt-4"},Aa={class:"col-12 text-center"},Ta=["disabled"],qa={key:0,class:"spinner-border spinner-border-sm me-2"},Ia={key:1,class:"row g-4"},Ea={class:"col-12"},Ba={class:"alert alert-info text-center"},Fa={key:0,class:"spinner-border spinner-border-sm me-2"},Oa={key:1},ja={key:2},La={key:3},$a={class:"modal fade",id:"makePaymentModal",tabindex:"-1","aria-hidden":"true"},Ra={class:"modal-dialog modal-md"},Ya={class:"modal-content border-0 shadow-lg"},za={class:"modal-body pt-4"},Ga={class:"form-group mb-4"},Ha=["value"],Wa={key:0,class:"form-group mb-4"},Ja={class:"input-group input-group-lg"},Ka={class:"d-flex gap-3 pt-3"},Qa=["disabled"],Xa={key:0},Za={key:1},el=w(e({__name:"Index",setup(e){const w=a([]),el=a([]),al=a([]),ll=a(""),tl=a(""),sl=a(null),nl=a(null),dl=a(!0),ol=a(!1),il=a(!1),rl=a(!1),cl=a(""),ul=a("order_id"),ml=a(null),vl=a(!1),bl=a(!1),pl=a({date:"",vendor_id:"",platform_id:"",item_name:"",purchase_cost:0,item_price:0,material_id:"",total_amount:0}),yl=a([]),fl=a(!1);l(()=>{const e=gl(pl.value.material_id);return(pl.value.item_price||0)-(pl.value.purchase_cost||0)-e});const _l=l(()=>al.value?.data&&el.value?.data&&w.value?.data),gl=e=>{if(!al.value?.data||!Array.isArray(al.value.data))return 0;const a=al.value.data.find(a=>a.id===e);return a?a.price:0},hl=()=>{const e={date:"",id:yl.value.length+1,vendor_id:"",platform_id:"",item_name:"",purchase_cost:0,item_price:0,material_id:""};yl.value.push(e)},kl=e=>{yl.value=yl.value.filter(a=>a.id!==e),yl.value.forEach((e,a)=>{e.id=a+1}),0===yl.value.length&&hl()},wl=l(()=>yl.value.reduce((e,a)=>{const l=gl(a.material_id);return e+((a.item_price||0)-(a.purchase_cost||0)-l)},0));t([()=>pl.value.item_price,()=>pl.value.purchase_cost,()=>pl.value.material_id],()=>{},{deep:!0});const xl=a({vendor_id:"",amount:0}),Pl=async()=>{try{if(200===(await k.post(route("payment.create",{vendor:xl.value.vendor_id}),{amount:xl.value.amount})).status){Ml(),xl.value={vendor_id:"",amount:0};const e=document.getElementById("makePaymentModal");if(e){const a=bootstrap.Modal.getInstance(e);a&&a.hide()}}}catch(e){alert("Payment submission failed. Please try again.")}},Ml=()=>{const e=document.createElement("div");e.className="modal fade",e.id="successPaymentModal",e.innerHTML='\n        <div class="modal-dialog modal-sm">\n            <div class="modal-content border-0 shadow-lg">\n                <div class="modal-header border-0 pb-0 text-center">\n                    <div class="w-100">\n                        <div class="success-icon mx-auto mb-3">\n                            <i class="ri-check-line"></i>\n                        </div>\n                        <h4 class="modal-title mb-2 fw-semibold text-success">Payment Successful!</h4>\n                        <p class="text-muted mb-0 small">Your payment has been processed</p>\n                    </div>\n                </div>\n                <div class="modal-body text-center pt-0">\n                    <div class="success-message">\n                        <i class="ri-money-dollar-circle-line text-success me-2"></i>\n                        <span class="fw-medium">Payment has been created successfully!</span>\n                    </div>\n                </div>\n                <div class="modal-footer border-0 justify-content-center pt-0">\n                    <button type="button" class="btn btn-success btn-lg px-4 shadow-sm" data-bs-dismiss="modal">\n                        <i class="ri-check-line me-2"></i>Great!\n                    </button>\n                </div>\n            </div>\n        </div>\n    ',document.body.appendChild(e);new bootstrap.Modal(e).show(),e.addEventListener("hidden.bs.modal",()=>{document.body.removeChild(e)})};async function Cl(){try{ol.value=!0;const e=await k.get(route("vendors.get"));w.value=e.data}catch(e){}finally{ol.value=!1}}async function Vl(e){e.preventDefault();try{201===(await k.post(route("vendor.create"),{name:ll.value,price:tl.value})).status&&(closeCreateModal.click(),ll.value="",await Cl())}catch(a){}}async function Nl(e){e.preventDefault();try{200===(await k.post(route("vendor.update",{id:nl.value}),{name:edit_vendor_name.value})).status&&(cancelMaterialButton.click(),nl.value=null,await Cl())}catch(a){}}async function Ul(e){e.preventDefault();try{200===(await k.post(route("vendor.delete",{id:sl.value}))).status&&(sl.value=null,cancelModalButton.click(),await Cl())}catch(a){}}const Sl=async e=>{if(e.preventDefault(),cl.value.trim())try{vl.value=!0,bl.value=!1;const e=await k.get(`/api/shipments/search?field=${ul.value}&query=${encodeURIComponent(cl.value.trim())}`),a=e.data?.data?.items||[];e.data.success&&e.data.data?(ml.value=e.data.data,bl.value=!0,pl.value={vendor_id:"",platform_id:"",item_name:"",purchase_cost:0,item_price:0,material_id:"",advance_payment:0},a.length>0?a.forEach(e=>{yl.value.push({id:e.id,date:e.created_at?.split("T")[0]||"",vendor_id:e.vendor_id||"",platform_id:e.platform_id||"",item_name:e.item_name||"",purchase_cost:e.purchase_cost||0,item_price:e.item_price||0,material_id:e.material_id||"",total_amount:e.total_amount||0})}):yl.value=[{date:"",id:1,vendor_id:"",platform_id:"",item_name:"",purchase_cost:0,item_price:0,material_id:"",advance_payment:0}]):(alert("No payment/shipment found with the provided details. Please try again."),ml.value=null,bl.value=!1)}catch(a){404===a.response?.status?alert("No shipment found with the provided details. Please try again."):alert("Error searching for payment. Please try again."),ml.value=null,bl.value=!1}finally{vl.value=!1}else alert("Please enter a search term")},Dl=async e=>{e.preventDefault();const a=e=>null==e||""===e;if(yl.value.filter(e=>a(e.vendor_id)||a(e.item_name)||a(e.purchase_cost)||a(e.item_price)||a(e.material_id)).length>0)alert("Please fill in all required fields for all items");else try{fl.value=!0;const e=yl.value.map(e=>k.post("/api/shipments/payment/update",{date:e.date||(new Date).toISOString().split("T")[0],id:e.id||null,shipment_id:ml.value.id,vendor_id:e.vendor_id,platform_id:e.platform_id,item_name:e.item_name,purchase_cost:e.purchase_cost,item_price:e.item_price,material_id:e.material_id,total_amount:e.total_amount})),a=await Promise.all(e);if(a.every(e=>e.data.success)){alert(`Payment details updated successfully for ${yl.value.length} item(s)!`),bl.value=!1,ml.value=null,cl.value="";const e=bootstrap.Modal.getInstance(document.getElementById("updatePaymentModal"));e&&e.hide()}else alert("Some items failed to update. Please try again.")}catch(l){l.response?.data?.message?alert("Error updating payment: "+l.response.data.message):alert("Error updating payment. Please try again.")}finally{fl.value=!1}},Al=()=>{cl.value="",ul.value="order_id",ml.value=null,bl.value=!1,pl.value={vendor_id:"",platform_id:"",item_name:"",purchase_cost:0,item_price:0,material_id:"",advance_payment:0},yl.value=[]},Tl=e=>new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e),ql=()=>{const e=$("#myTable").DataTable();$.fn.DataTable.isDataTable("#myTable")&&e.destroy(),h(()=>{$("#myTable").DataTable({pageLength:10,lengthMenu:[[10,25,50,-1],[10,25,50,"All"]]})})};s(async()=>{await Cl(),await async function(){try{rl.value=!0;const e=await k.get(route("platforms.get"));el.value=e.data}catch(e){}finally{rl.value=!1}}(),await async function(){try{il.value=!0;const e=await k.get(route("materials.get"));al.value=e.data}catch(e){}finally{il.value=!1}}(),ql(),dl.value=!1;const e=document.getElementById("updatePaymentModal");e&&e.addEventListener("hidden.bs.modal",Al)});let Il=!1;return t(w,()=>{Il?ql():Il=!0}),(e,a)=>(d(),n(m,null,[o(i("div",x,[i("div",P,[a[10]||(a[10]=c('<div class="card-header d-flex align-items-center justify-content-between ps-0 pb-0" data-v-f1b2ea97><h5 class="card-header" data-v-f1b2ea97>Manage Vendors</h5><div class="d-flex gap-2" data-v-f1b2ea97><button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addMaterialModal" data-v-f1b2ea97>Add Vendor</button><button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#makePaymentModal" data-v-f1b2ea97>Make</button><button type="button" class="btn btn-warning" data-bs-toggle="modal" data-bs-target="#updatePaymentModal" data-v-f1b2ea97>Update Payment</button></div></div>',1)),ol.value?(d(),n("div",M,a[7]||(a[7]=[i("div",{class:"loading-spinner"},null,-1),i("div",{class:"mt-3 text-muted"},"Fetching data...",-1)]))):u("",!0),i("div",C,[i("table",V,[a[9]||(a[9]=i("thead",null,[i("tr",null,[i("th",null,"No#"),i("th",null,"Vendor Name"),i("th",null,"Total Payment"),i("th",null,"Action")])],-1)),i("tbody",null,[(d(!0),n(m,null,v(w.value.data,(l,t)=>(d(),n("tr",{key:l.id},[i("td",null,_(t+1),1),i("td",null,_(l.name),1),i("td",null,_(l.toPay),1),i("td",N,[i("a",{href:e.route("vendors.show",{vendor:l.id}),class:"btn btn-sm btn-info"},a[8]||(a[8]=[i("i",{class:"ri-eye-line me-1"},null,-1),b("View ",-1)]),8,U),i("button",{class:"btn btn-sm btn-warning editBtn",onClick:e=>nl.value=l.id,"data-bs-target":"#editMaterialModal","data-bs-toggle":"modal","data-id":"1"},"Edit",8,S),i("button",{class:"btn btn-sm btn-danger deleteBtn",onClick:e=>sl.value=l.id,"data-bs-toggle":"modal","data-bs-target":"#deleteMaterialModal","data-id":"1"},"Delete",8,D)])]))),128))])])])])],512),[[r,!dl.value]]),o(i("div",A,a[11]||(a[11]=[i("span",{class:"loader"},null,-1)]),512),[[r,dl.value]]),i("div",T,[i("div",q,[i("div",I,[i("div",E,[a[13]||(a[13]=i("h4",{class:"text-center mb-4"},[b("Are you sure you want to delete "),i("span",{id:"delete_material_name"}),b("?")],-1)),i("form",B,[a[12]||(a[12]=i("input",{type:"hidden",name:"material_id",id:"delete_material_id"},null,-1)),i("button",{type:"submit",onClick:Ul,name:"delete_material",class:"btn btn-danger me-3"},"Yes, Delete"),i("button",{type:"button",onClick:a[0]||(a[0]=e=>sl.value=null),id:"cancelModalButton",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Cancel")])])])])]),i("div",F,[i("div",O,[i("div",j,[i("div",L,[a[16]||(a[16]=i("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"},null,-1)),a[17]||(a[17]=i("div",{class:"text-center mb-6"},[i("h4",{class:"mb-2"},"Edit Packaging Material")],-1)),i("form",R,[a[15]||(a[15]=i("input",{type:"hidden",name:"material_id",id:"edit_material_id"},null,-1)),i("div",Y,[i("div",z,[i("input",{type:"text",value:w.value.data?.filter(e=>e.id==nl.value)[0]?.name??"",name:"vendor_name",id:"edit_vendor_name",class:"form-control",placeholder:"Vendor Name",required:""},null,8,G),a[14]||(a[14]=i("label",{for:"edit_vendor_name"},"Vendor Name",-1))])]),i("div",H,[i("button",{type:"submit",onClick:Nl,name:"update_material",id:"updateMaterialButton",class:"btn btn-primary me-3"},"Update"),i("button",{type:"button",onClick:a[1]||(a[1]=e=>nl.value=null),id:"cancelMaterialButton",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"Cancel")])])])])])]),i("div",W,[i("div",J,[i("div",K,[i("div",Q,[a[20]||(a[20]=i("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"},null,-1)),a[21]||(a[21]=i("div",{class:"mb-6 text-center"},[i("h4",{class:"mb-2"},"Add Packaging Material")],-1)),i("form",X,[i("div",Z,[i("div",ee,[o(i("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>ll.value=e),type:"text",name:"vendor_name",class:"form-control",placeholder:"Vendor Name",required:""},null,512),[[p,ll.value]]),a[18]||(a[18]=i("label",{for:"vendor_name"},"Name",-1))])]),i("div",{class:"col-12 text-center"},[i("button",{type:"submit",name:"add_material",onClick:Vl,class:"btn btn-primary me-3"},"Submit"),a[19]||(a[19]=i("button",{type:"button",id:"closeCreateModal",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"Cancel",-1))])])])])])]),i("div",ae,[i("div",le,[i("div",te,[i("div",se,[i("button",{type:"button",class:"btn-close",onClick:Al,"data-bs-dismiss":"modal"}),a[62]||(a[62]=i("div",{class:"mb-6 text-center"},[i("h4",{class:"mb-2"},"Update Payment"),i("p",{class:"text-muted"},"Search and update existing payment records")],-1)),i("form",{onSubmit:y(Sl,["prevent"]),class:"row g-4 mb-4"},[i("div",ne,[i("div",de,[o(i("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>ul.value=e),class:"form-select",required:""},a[22]||(a[22]=[i("option",{value:"order_id"},"Order ID",-1),i("option",{value:"tracking_number"},"Tracking Number",-1),i("option",{value:"consignee_name"},"Customer Name",-1),i("option",{value:"consignee_phone"},"Phone Number",-1)]),512),[[f,ul.value]]),a[23]||(a[23]=i("label",null,"Search Field",-1))])]),i("div",oe,[i("div",ie,[o(i("input",{"onUpdate:modelValue":a[4]||(a[4]=e=>cl.value=e),type:"text",class:"form-control",placeholder:"Enter "+("order_id"===ul.value?"Order ID":"tracking_number"===ul.value?"Tracking Number":"consignee_name"===ul.value?"Customer Name":"Phone Number"),required:""},null,8,re),[[p,cl.value]]),i("label",null,_("order_id"===ul.value?"Order ID":"tracking_number"===ul.value?"Tracking Number":"consignee_name"===ul.value?"Customer Name":"Phone Number"),1)])]),i("div",ce,[i("button",{type:"submit",class:"btn btn-warning me-3",disabled:vl.value},[vl.value?(d(),n("span",me)):u("",!0),b(" "+_(vl.value?"Searching...":"Search Payment"),1)],8,ue),i("button",{type:"button",onClick:Al,class:"btn btn-outline-secondary me-2"},"Reset"),a[24]||(a[24]=i("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"Cancel",-1))])],32),bl.value&&ml.value&&_l.value?(d(),n("div",ve,[i("div",be,[i("div",pe,[a[36]||(a[36]=i("div",{class:"card-header"},[i("h6",{class:"mb-0"},[i("i",{class:"ri-information-line me-2"}),b("Found Order Details")])],-1)),i("div",ye,[i("div",fe,[i("div",_e,[a[25]||(a[25]=i("label",{class:"form-label fw-bold"},"Order ID:",-1)),i("p",ge,_(ml.value.order_id||"N/A"),1)]),i("div",he,[a[26]||(a[26]=i("label",{class:"form-label fw-bold"},"Tracking Number:",-1)),i("p",ke,_(ml.value.tracking_number||"N/A"),1)]),i("div",we,[a[27]||(a[27]=i("label",{class:"form-label fw-bold"},"Customer Name:",-1)),i("p",xe,_(ml.value.consignee_name||"N/A"),1)]),i("div",Pe,[a[28]||(a[28]=i("label",{class:"form-label fw-bold"},"Phone Number:",-1)),i("p",Me,_(ml.value.consignee_phone||"N/A"),1)]),i("div",Ce,[a[29]||(a[29]=i("label",{class:"form-label fw-bold"},"Destination City:",-1)),i("p",Ve,_(ml.value.destination_city||"N/A"),1)]),i("div",Ne,[a[30]||(a[30]=i("label",{class:"form-label fw-bold"},"COD Amount:",-1)),i("p",Ue,_(ml.value.cod_amount||"N/A"),1)]),i("div",Se,[a[31]||(a[31]=i("label",{class:"form-label fw-bold"},"Shipment Type:",-1)),i("p",De,_(ml.value.shipment_type||"N/A"),1)]),i("div",Ae,[a[32]||(a[32]=i("label",{class:"form-label fw-bold"},"Weight:",-1)),i("p",Te,_(ml.value.weight?`${ml.value.weight} kg`:"N/A"),1)]),i("div",qe,[a[33]||(a[33]=i("label",{class:"form-label fw-bold"},"No. of Pieces:",-1)),i("p",Ie,_(ml.value.no_of_pieces||"N/A"),1)]),i("div",Ee,[a[34]||(a[34]=i("label",{class:"form-label fw-bold"},"Status:",-1)),i("p",Be,[i("span",Fe,_(ml.value.status||"N/A"),1)])]),ml.value.consignee_address?(d(),n("div",Oe,[a[35]||(a[35]=i("label",{class:"form-label fw-bold"},"Delivery Address:",-1)),i("p",je,_(ml.value.consignee_address),1)])):u("",!0)])])])]),i("div",Le,[i("div",$e,[i("div",{class:"card-header d-flex align-items-center justify-content-between"},[a[37]||(a[37]=i("h6",{class:"mb-0"},[i("i",{class:"ri-money-dollar-circle-line me-2"}),b("Update Payment Details")],-1)),i("button",{type:"button",onClick:hl,class:"btn btn-sm btn-success"},"+")]),i("div",Re,[i("form",{onSubmit:y(Dl,["prevent"])},[i("div",Ye,[i("table",ze,[i("thead",{class:"table-light"},[i("tr",null,[a[38]||(a[38]=i("th",null,"Date",-1)),a[39]||(a[39]=i("th",null,"Vendor",-1)),a[40]||(a[40]=i("th",null,"Product Name",-1)),a[41]||(a[41]=i("th",null,"Cost",-1)),a[42]||(a[42]=i("th",null,"Selling",-1)),a[43]||(a[43]=i("th",null,"Packaging Material",-1)),a[44]||(a[44]=i("th",null,"Total Amount",-1)),a[45]||(a[45]=i("th",null,"Profit",-1)),i("th",{style:{width:"64px"}},[i("button",{type:"button",class:"btn btn-sm btn-success",onClick:hl},"+")])])]),i("tbody",null,[(d(!0),n(m,null,v(yl.value,e=>(d(),n("tr",{key:e.id},[i("td",null,[o(i("input",{type:"date","onUpdate:modelValue":a=>e.date=a,class:"form-control",required:""},null,8,Ge),[[p,e.date]])]),i("td",null,[o(i("select",{"onUpdate:modelValue":a=>e.vendor_id=a,class:"form-select",required:""},[a[46]||(a[46]=i("option",{value:""},"Select Vendor",-1)),(d(!0),n(m,null,v(w.value.data||[],e=>(d(),n("option",{key:e.id,value:e.id},_(e.name),9,We))),128))],8,He),[[f,e.vendor_id]])]),i("td",null,[o(i("input",{type:"text","onUpdate:modelValue":a=>e.item_name=a,class:"form-control",required:""},null,8,Je),[[p,e.item_name]])]),i("td",null,[o(i("input",{type:"number",step:"0.01","onUpdate:modelValue":a=>e.purchase_cost=a,class:"form-control",required:""},null,8,Ke),[[p,e.purchase_cost,void 0,{number:!0}]])]),i("td",null,[o(i("input",{type:"number",step:"0.01","onUpdate:modelValue":a=>e.item_price=a,class:"form-control",required:""},null,8,Qe),[[p,e.item_price,void 0,{number:!0}]])]),i("td",null,[o(i("select",{"onUpdate:modelValue":a=>e.material_id=a,class:"form-select",required:""},[a[47]||(a[47]=i("option",{value:""},"Select Material",-1)),(d(!0),n(m,null,v(al.value.data||[],e=>(d(),n("option",{key:e.id,value:e.id},_(e.name)+" ("+_(e.price)+") ",9,Ze))),128))],8,Xe),[[f,e.material_id]])]),i("td",null,[i("input",{type:"number",readonly:"",value:e.item_price,step:"0.01",class:"form-control"},null,8,ea)]),i("td",null,[i("input",{type:"number",value:(e.item_price||0)-(e.purchase_cost||0)-gl(e.material_id),class:"form-control",readonly:""},null,8,aa)]),i("td",null,[i("button",{type:"button",class:"btn btn-sm btn-danger",onClick:a=>kl(e.id),disabled:1===yl.value.length},"-",8,la)])]))),128)),i("tr",ta,[a[48]||(a[48]=i("td",{class:"totals-label"},[i("strong",null,"Total")],-1)),i("td",sa,[i("strong",null,_(yl.value.length)+" Items",1)]),a[49]||(a[49]=i("td",{class:"totals-label"},[i("strong",null,"—")],-1)),i("td",na,[i("strong",null,_(Tl(yl.value.reduce((e,a)=>e+(a.purchase_cost||0),0))),1)]),i("td",da,[i("strong",null,_(Tl(yl.value.reduce((e,a)=>e+gl(a.material_id),0))),1)]),i("td",oa,[i("strong",null,_(Tl(yl.value.reduce((e,a)=>e+(a.item_price||0),0))),1)]),i("td",ia,[i("strong",{class:g({"text-danger":wl.value<0,"text-success":wl.value>0})},_(Tl(wl.value)),3)]),i("td",ra,[i("strong",null,_(yl.value.reduce((e,a)=>e+(a.item_price||0),0)>0?(wl.value/yl.value.reduce((e,a)=>e+(a.item_price||0),0)*100).toFixed(1):0)+"%",1)])])])])]),i("div",ca,[(d(!0),n(m,null,v(yl.value,e=>(d(),n("div",{key:"m-"+e.id,class:"item-card mb-3 p-3 border rounded"},[i("div",ua,[i("h6",ma,"Item #"+_(e.id),1),i("button",{type:"button",onClick:a=>kl(e.id),class:"btn btn-sm btn-outline-danger",disabled:1===yl.value.length},a[50]||(a[50]=[i("i",{class:"ri-delete-bin-line"},null,-1)]),8,va)]),i("div",ba,[i("div",pa,[a[52]||(a[52]=i("label",{class:"form-label small"},"Vendor",-1)),o(i("select",{"onUpdate:modelValue":a=>e.vendor_id=a,class:"form-select form-select-sm",required:""},[a[51]||(a[51]=i("option",{value:""},"Select Vendor",-1)),(d(!0),n(m,null,v(w.value.data||[],e=>(d(),n("option",{key:e.id,value:e.id},_(e.name),9,fa))),128))],8,ya),[[f,e.vendor_id]])]),i("div",_a,[a[53]||(a[53]=i("label",{class:"form-label small"},"Product Name",-1)),o(i("input",{"onUpdate:modelValue":a=>e.item_name=a,type:"text",class:"form-control form-control-sm",required:""},null,8,ga),[[p,e.item_name]])]),i("div",ha,[a[54]||(a[54]=i("label",{class:"form-label small"},"Cost",-1)),o(i("input",{"onUpdate:modelValue":a=>e.purchase_cost=a,type:"number",step:"0.01",class:"form-control form-control-sm",required:""},null,8,ka),[[p,e.purchase_cost]])]),i("div",wa,[a[55]||(a[55]=i("label",{class:"form-label small"},"Selling",-1)),o(i("input",{"onUpdate:modelValue":a=>e.item_price=a,type:"number",step:"0.01",class:"form-control form-control-sm",required:""},null,8,xa),[[p,e.item_price]])]),i("div",Pa,[a[57]||(a[57]=i("label",{class:"form-label small"},"Packaging Material",-1)),o(i("select",{"onUpdate:modelValue":a=>e.material_id=a,class:"form-select form-select-sm",required:""},[a[56]||(a[56]=i("option",{value:""},"Select Material",-1)),(d(!0),n(m,null,v(al.value.data||[],e=>(d(),n("option",{key:e.id,value:e.id},_(e.name)+" ("+_(e.price)+") ",9,Ca))),128))],8,Ma),[[f,e.material_id]])]),i("div",Va,[a[58]||(a[58]=i("label",{class:"form-label small"},"Total Amount",-1)),i("input",{value:e.total_amount,type:"number",step:"0.01",class:"form-control form-control-sm"},null,8,Na)]),i("div",Ua,[i("div",Sa,[a[59]||(a[59]=i("strong",null,"Profit:",-1)),b(" "+_(Tl((e.item_price||0)-(e.purchase_cost||0)-gl(e.material_id))),1)])])])]))),128)),i("div",{class:"text-center mt-3"},[i("button",{type:"button",onClick:hl,class:"btn btn-success"},a[60]||(a[60]=[i("i",{class:"ri-add-line me-1"},null,-1),b("Add Item ",-1)]))])]),i("div",Da,[i("div",Aa,[i("button",{type:"submit",class:"btn btn-warning me-3",disabled:fl.value},[fl.value?(d(),n("span",qa)):u("",!0),b(" "+_(fl.value?"Updating...":"Update Payment"),1)],8,Ta),a[61]||(a[61]=i("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"Cancel",-1))])])],32)])])])])):u("",!0),bl.value&&ml.value&&!_l.value?(d(),n("div",Ia,[i("div",Ea,[i("div",Ba,[il.value||rl.value?(d(),n("div",Fa)):u("",!0),il.value?(d(),n("span",Oa,"Loading materials...")):rl.value?(d(),n("span",ja,"Loading platforms...")):(d(),n("span",La,"Loading payment form data..."))])])])):u("",!0)])])])]),i("div",$a,[i("div",Ra,[i("div",Ya,[a[71]||(a[71]=c('<div class="modal-header border-0 pb-0" data-v-f1b2ea97><div class="d-flex align-items-center" data-v-f1b2ea97><div class="payment-icon me-3" data-v-f1b2ea97><i class="ri-money-dollar-circle-line text-primary" data-v-f1b2ea97></i></div><div data-v-f1b2ea97><h4 class="modal-title mb-1 fw-semibold text-dark" data-v-f1b2ea97>Make Payment</h4><p class="text-muted mb-0 small" data-v-f1b2ea97>Record a new payment transaction</p></div></div><button type="button" class="btn-close" data-bs-dismiss="modal" data-v-f1b2ea97></button></div>',1)),i("div",za,[i("form",{onSubmit:y(Pl,["prevent"])},[i("div",Ga,[a[64]||(a[64]=i("label",{for:"payment_vendor_id",class:"form-label fw-medium text-dark mb-2"},[i("i",{class:"ri-user-line me-2 text-muted"}),b("Select Vendor ")],-1)),o(i("select",{"onUpdate:modelValue":a[5]||(a[5]=e=>xl.value.vendor_id=e),id:"payment_vendor_id",class:g(["form-select form-select-lg border-2",xl.value.vendor_id?"border-success":"border-light"]),required:""},[a[63]||(a[63]=i("option",{value:""},"Choose a vendor from the list...",-1)),(d(!0),n(m,null,v(w.value.data,e=>(d(),n("option",{key:e.id,value:e.id,class:"py-2"},_(e.name),9,Ha))),128))],2),[[f,xl.value.vendor_id]]),a[65]||(a[65]=i("div",{class:"form-text text-muted small mt-1"},[i("i",{class:"ri-information-line me-1"}),b("Select the vendor you want to make payment to ")],-1))]),xl.value.vendor_id?(d(),n("div",Wa,[a[67]||(a[67]=i("label",{for:"payment_amount",class:"form-label fw-medium text-dark mb-2"},[i("i",{class:"ri-money-dollar-circle-line me-2 text-muted"}),b("Payment Amount ")],-1)),i("div",Ja,[a[66]||(a[66]=i("span",{class:"input-group-text bg-light border-end-0"},[i("i",{class:"ri-currency-line text-muted"})],-1)),o(i("input",{"onUpdate:modelValue":a[6]||(a[6]=e=>xl.value.amount=e),type:"number",step:"0.01",id:"payment_amount",class:"form-control border-start-0 ps-0",placeholder:"0.00",required:""},null,512),[[p,xl.value.amount,void 0,{number:!0}]])]),a[68]||(a[68]=i("div",{class:"form-text text-muted small mt-1"},[i("i",{class:"ri-information-line me-1"}),b("Enter the payment amount in your local currency ")],-1))])):u("",!0),i("div",Ka,[a[70]||(a[70]=i("button",{type:"button",class:"btn btn-outline-secondary btn-lg flex-fill","data-bs-dismiss":"modal"},[i("i",{class:"ri-close-line me-2"}),b("Cancel ")],-1)),i("button",{type:"submit",class:"btn btn-primary btn-lg flex-fill shadow-sm",disabled:!xl.value.vendor_id||!xl.value.amount},[a[69]||(a[69]=i("i",{class:"ri-check-line me-2"},null,-1)),xl.value.vendor_id&&xl.value.amount?(d(),n("span",Za,"Submit Payment")):(d(),n("span",Xa,"Fill Required Fields"))],8,Qa)])],32)])])])])],64))}}),[["__scopeId","data-v-f1b2ea97"]]);export{el as default};
