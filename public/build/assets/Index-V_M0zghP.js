import{g as e,r as t,y as a,o as l,n as i,z as n,D as s,c as d,a as o,d as c,k as r,t as u,f as v,F as p,b as g,m,p as y,A as h,B as f,C as b,s as _}from"./vendor-DCAUJ3rR.js";import{a as k}from"./data-C-1G2k3o.js";import{_ as x}from"./app-eGF7VWS9.js";import"./ui-qR5y7ijB.js";const C={class:"modal fade",id:"statusModal",tabindex:"-1","aria-hidden":"true"},w={class:"modal-dialog modal-dialog-centered modal-lg"},D={class:"modal-content status-modal p-0"},A={class:"sm-hero"},S={class:"sm-loc"},M={class:"sm-city"},R={class:"sm-state"},T={class:"sm-chip"},P={class:"sm-date"},N={class:"sm-loc"},O={class:"sm-city"},z={class:"sm-card"},B={class:"sm-summary"},E={class:"sm-col"},I={class:"sm-table"},Y={class:"sm-col"},F={class:"sm-table"},q={class:"sm-card sm-timeline"},L={key:0,class:"text-center py-4"},j={key:1,class:"text-center py-5"},U={key:2,class:"vtl",role:"list"},H={class:"vtl-meta"},K={class:"vtl-date"},W={class:"vtl-time"},G={class:"vtl-content"},V={class:"vtl-title"},Z={class:"vtl-sub"},X={key:0},J={key:1},Q={key:0,class:"text-center py-4"},ee={class:"modal fade",id:"cancelConfirmModal",tabindex:"-1","aria-hidden":"true"},te={class:"modal-dialog modal-dialog-centered"},ae={class:"modal-content p-4 text-center"},le={class:"modal-body"},ie={class:"d-flex justify-content-center mt-3 gap-3"},ne={class:"modal fade",id:"viewShipmentModal",tabindex:"-1","aria-hidden":"true"},se={class:"modal-dialog modal-lg modal-dialog-centered"},de={class:"modal-content p-3"},oe={class:"modal-header"},ce={class:"modal-title"},re={key:0,class:"ms-2 text-muted"},ue={class:"modal-body"},ve={key:0,class:"details-inner"},pe={class:"details-grid"},ge={class:"value"},me={class:"value"},ye={class:"value"},he={class:"value"},fe={class:"value"},be={class:"value"},_e={class:"value"},ke={class:"value"},xe={class:"value"},Ce={class:"value"},we={class:"value"},De={class:"value"},Ae={class:"modal-footer"},Se={class:"modal fade",id:"invoiceModal",tabindex:"-1","aria-hidden":"true"},Me={class:"modal-dialog modal-sm modal-dialog-centered"},Re={class:"modal-content p-3"},Te={class:"modal-body"},Pe={class:"invoice-card"},$e={class:"invoice-row",style:{"margin-bottom":"6px"}},Ne={class:"invoice-number"},Oe={class:"invoice-row"},ze={class:"invoice-row"},Be={class:"invoice-row"},Ee={class:"invoice-row"},Ie={class:"invoice-row total"},Ye={key:0,class:"container-xxl container-p-y flex-grow-1"},Fe={class:"card mb-4 p-3"},qe={id:"filterForm"},Le={class:"row"},je={class:"col-md-6"},Ue={class:"col-md-6"},He={class:"row mt-2"},Ke={class:"col-md-6"},We={id:"origin_city",class:"form-control select2"},Ge=["value"],Ve={class:"col-md-6"},Ze={id:"destination_city",class:"form-control select2"},Xe=["value"],Je={class:"card position-relative"},Qe={key:0,class:"loading-overlay"},et={class:"table-responsive text-nowrap",id:"packetTableWrapper"},tt={id:"myTable",class:"table-bordered table align-middle",style:{"font-size":"12px"}},at={style:{"text-align":"center","padding-left":"5px","padding-right":"0px"}},lt=["checked"],it={id:"packetTableBody"},nt={style:{"text-align":"center"}},st=["data-id","checked","onChange"],dt={style:{"padding-left":"0px","padding-right":"0px"}},ot={style:{"padding-left":"5px"}},ct={style:{"padding-left":"0px"}},rt={style:{"font-weight":"bold"}},ut={style:{"font-size":"10px","background-color":"#faf5ff",padding:"2px 5px","border-radius":"10px","margin-top":"20px",border:"1px solid #ede7f6",color:"#7e57c2"}},vt={style:{"padding-left":"0px","padding-right":"0px"}},pt=["onClick"],gt={style:{"font-size":"10px",padding:"2px 5px","margin-top":"20px","border-radius":"10px"}},mt={class:"text-truncate",style:{"max-width":"160px","padding-left":"0px"}},yt={style:{"font-weight":"bold"}},ht={style:{"font-size":"10px","background-color":"#faf5ff",padding:"2px 5px","border-radius":"10px","margin-top":"20px",border:"1px solid #ede7f6",color:"#7e57c2"}},ft=["data-shipment-id"],bt=["onMouseenter","onMouseleave"],_t=["innerHTML"],kt={style:{"font-size":"10px","background-color":"#faf5ff",padding:"2px 5px","border-radius":"10px","margin-top":"20px",border:"1px solid #ede7f6",color:"#7e57c2"}},xt={style:{width:"10%","padding-left":"0px","padding-right":"0px","text-align":"center"}},Ct={style:{"font-weight":"bold"}},wt={style:{"font-size":"10px","background-color":"#faf5ff",padding:"2px 5px","border-radius":"10px","margin-top":"20px",border:"1px solid #ede7f6",color:"#7e57c2"}},Dt={style:{"padding-left":"0px","padding-right":"0px","text-align":"center"}},At=["onClick"],St={class:"d-flex gap-2",style:{"padding-top":"30px"}},Mt=["disabled","onClick"],Rt=["onClick"],Tt={class:"tooltip-content"},Pt={class:"tooltip-body"},$t={key:2,style:{display:"flex","align-items":"center","justify-content":"center","flex-direction":"column",height:"100vh"}},Nt=x(e({__name:"Index",setup(e){t(1);const x=t([]),Nt=t([]),Ot=a({dateRange:"",status:"",originCity:"",destination_city:""}),zt=t(null),Bt=t(!0),Et=t(!1),It=t([]),Yt=t(!1),Ft=t(null),qt=t(null),Lt=t({}),jt=t(null),Ut=t(!1),Ht=e=>e??0===e?new Intl.NumberFormat("en-PK").format(Number(e)):"—";function Kt(){Ot.dateRange="",Ot.status="",Ot.originCity="",Ot.destination_city=""}function Wt(e){if(!e)return"17-March-2003";const t=new Date(e);return`${String(t.getDate()).padStart(2,"0")}-${t.toLocaleString("en-US",{month:"long"})}-${t.getFullYear()}`}const Gt=e=>{if(!e)return"—";if(e.length<=25)return e;const t=[];for(let a=0;a<e.length;a+=25)t.push(e.substring(a,a+25));if(e.length>50){return t.slice(0,2).join("<br>")+'<br><span style="color: #6c757d; font-style: italic;">...</span>'}return t.join("<br>")},Vt=e=>{const t=document.querySelector(`[data-shipment-id="${e}"] .address-container`);if(t){const a=t.getBoundingClientRect();Lt.value[e]={left:a.left+a.width/2,top:a.top-120}}},Zt=()=>{requestAnimationFrame(()=>{ta()})},Xt=()=>{const e="#myTable";$.fn.DataTable.isDataTable(e)&&$(e).DataTable().destroy(),i(()=>{const t=$(e).DataTable({autoWidth:!0,scrollX:!0,columnDefs:[{targets:"_all",className:"align-middle"}]}),a=()=>t.columns.adjust();$(window).on("resize.dt",a),window.addEventListener("orientationchange",a),document.addEventListener("shown.bs.modal",a),document.addEventListener("shown.bs.tab",a),t.on("draw",()=>Zt()),Zt()})};l(async()=>{await(async()=>{try{Et.value=!0;const e=await k.get("/api/shipments");x.value=e.data.data||[]}catch(e){}finally{Et.value=!1}})(),await(async()=>{try{const e=await k.get(route("courier.cities",{courier:"leopard"}));Nt.value=e.data.data||[]}catch(e){}})(),i(()=>{Xt(),i(()=>{$("#origin_city").select2().on("change",e=>{Ot.originCity=$(e.target).val()}),$("#destination_city").select2().on("change",e=>{Ot.destination_city=$(e.target).val()}),$("#daterange").daterangepicker({locale:{format:"YYYY-MM-DD"}},function(e,t){Ot.dateRange=`${e.format("YYYY-MM-DD")} - ${t.format("YYYY-MM-DD")}`})})}),Bt.value=!1}),n(Ot,async e=>{const t=await k.get(route("shipments.index"),{params:{date_from:e.dateRange.split(" - ")[0],date_to:e.dateRange.split(" - ")[1],status:e.status,origin_city:e.originCity,destination_city:e.destination_city}});x.value=t.data.data||[],Xt()});const Jt=()=>{const e=x.value.map(e=>e.id);if(Yt.value){const t=new Set(e);It.value=It.value.filter(e=>!t.has(e)),Yt.value=!1}else{const t=new Set(It.value);e.forEach(e=>t.add(e)),It.value=Array.from(t),Yt.value=!0}},Qt=s(()=>{const e=new Map;return x.value.forEach(t=>{e.set(t.id,It.value.includes(t.id))}),e});let ea=null;const ta=()=>{ea&&clearTimeout(ea),ea=setTimeout(()=>{const e=x.value.map(e=>e.id),t=e.length>0&&e.every(e=>It.value.includes(e));Yt.value=t,ea=null},50)},aa=e=>{zt.value=e,document.getElementById("cancelModalPopup")?.click()},la=()=>{const e=It.value.join(","),t=e.length?route("slips.merged",{ids:e}):route("slips.merged");window.open(t,"_blank")},ia={"Drop Off at Express Center":"drop-off","Shipment Picked":"shipment-picked","Being Return":"being-return","Ready for Return":"ready-for-return",Dispatched:"dispatched",Delivered:"delivered",Pending:"pending",Missroute:"missroute","Returned to shipper":"returned-to-shipper","Arrived at Station":"arrived-at-station","Assign to Courier":"assign-to-courier","Consignment Booked":"consignment-booked",Cancelled:"cancelled","Pickup Request Sent":"pickup-request-sent","48 Hours Auto Canceled":"auto-canceled","Pickup Request not Send":"pickup-request-not-sent"},na=t(null),sa=t(null),da={Delivered:"/images/status/delivered.png",Dispatched:"/images/status/dispatched.png",Pending:"/images/status/pending.png",Cancelled:"/images/status/cancelled.png"},oa=s(()=>sa.value?sa.value.is_cancelled?"Cancelled":sa.value.status||"—":"—");s(()=>da[oa.value]||"/images/status/placeholder.png");const ca=async e=>{if(e)try{Ut.value=!0,jt.value=null;const t=await k.get(`/api/shipments/track/${e}`);t.data.success&&(jt.value=t.data.data,jt.value)}catch(t){}finally{Ut.value=!1}},ra=e=>{const t=Number(e);return Number.isFinite(t)?(t/1e3).toFixed(3):"—"},ua=e=>{if(!e)return"17-March-2003";try{const t=new Date(e),a=String(t.getDate()).padStart(2,"0"),l=t.toLocaleString("en-US",{month:"long"});return`${a}-${l}-${t.getFullYear()}`}catch(t){return"17-March-2003"}},va=e=>{if(!e)return"1:00 AM";try{if(e.includes("-")||e.includes("/")){return new Date(e).toLocaleString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}if(e.includes(":")||e.includes("AM")||e.includes("PM")){const t=e.split(":");if(t.length>=2){let a=parseInt(t[0]);const l=t[1].replace(/\D/g,""),i=e.includes("PM")?"PM":"AM";return 0===a?a=12:a>12&&(a-=12),`${a}:${l.padStart(2,"0")} ${i}`}}return e}catch(t){return"1:00 AM"}};s(()=>materials.value?.data&&platforms.value?.data&&vendors.value?.data);const pa=s(()=>{if(!jt.value?.packet_list?.[0])return[];const e=jt.value.packet_list[0],t=e["Tracking Detail"]||e.tracking_detail||e.trackingDetail||[];return t.length,Array.isArray(t)?t:[]}),ga=s(()=>{const e=pa.value;return e&&0!==e.length?[...e].sort((e,t)=>{const a=e.Activity_Date||e["Activity Date"]||e.activity_date||e.activityDate||"",l=e.Activity_Time||e["Activity Time"]||e.activity_time||e.activityTime||"",i=t.Activity_Date||t["Activity Date"]||t.activity_date||t.activityDate||"",n=t.Activity_Time||t["Activity Time"]||t.activity_time||t.activityTime||"",s=new Date(`${a} ${l}`);return new Date(`${i} ${n}`)-s}):[]});return(e,t)=>(o(),d(p,null,[c("div",C,[c("div",w,[c("div",D,[c("div",A,[c("div",S,[t[5]||(t[5]=c("div",{class:"sm-label"},"From",-1)),c("div",M,u(sa.value?.origin_city??"—"),1)]),c("div",R,[c("span",T,u(oa.value),1),c("div",P,u(Wt(sa.value?.last_activity)),1)]),c("div",N,[t[6]||(t[6]=c("div",{class:"sm-label"},"To",-1)),c("div",O,u(sa.value?.destination_city??"—"),1)])]),c("section",z,[t[15]||(t[15]=c("header",{class:"sm-card-title"},"Shipment Summary",-1)),c("div",B,[c("div",E,[c("table",I,[c("tbody",null,[c("tr",null,[t[7]||(t[7]=c("th",null,"Tracking #",-1)),c("td",null,u(sa.value?.tracking_number??"—"),1)]),c("tr",null,[t[8]||(t[8]=c("th",null,"No. of pieces",-1)),c("td",null,u(jt.value?.packet_list?.[0]?.booked_packet_no_piece??sa.value?.no_of_pieces??"—"),1)]),c("tr",null,[t[9]||(t[9]=c("th",null,"Shipper name",-1)),c("td",null,u(jt.value?.packet_list?.[0]?.shipment_name_eng??"ZEBTAN COLLECTION"),1)]),c("tr",null,[t[10]||(t[10]=c("th",null,"Shipper address",-1)),c("td",null,[v(u(jt.value?.packet_list?.[0]?.shipment_address??"FLAT NO 8 REHMAN MANZIL STREET NO 6 BURNS ROAD KARACHI")+" ",1),sa.value?.origin_city?(o(),d(p,{key:0},[v(", "+u(sa.value?.origin_city),1)],64)):r("",!0)])])])])]),c("div",Y,[c("table",F,[c("tbody",null,[c("tr",null,[t[11]||(t[11]=c("th",null,"Reference # / Order ID",-1)),c("td",null,u(jt.value?.packet_list?.[0]?.booked_packet_order_id??sa.value?.order_id??"—"),1)]),c("tr",null,[t[12]||(t[12]=c("th",null,"Packet weight",-1)),c("td",null,u(ra(jt.value?.packet_list?.[0]?.booked_packet_weight??sa.value?.weight))+" (Kgs)",1)]),c("tr",null,[t[13]||(t[13]=c("th",null,"Consignee name",-1)),c("td",null,u(jt.value?.packet_list?.[0]?.consignment_name_eng??sa.value?.consignee_name??"—"),1)]),c("tr",null,[t[14]||(t[14]=c("th",null,"Consignee address",-1)),c("td",null,[v(u(jt.value?.packet_list?.[0]?.consignment_address??sa.value?.consignee_address??"—")+" ",1),sa.value?.destination_city?(o(),d(p,{key:0},[v(", "+u(sa.value?.destination_city),1)],64)):r("",!0)])])])])])])]),c("section",q,[t[20]||(t[20]=c("header",{class:"sm-card-title"},"Tracking Timeline",-1)),Ut.value?(o(),d("div",L,t[16]||(t[16]=[c("div",{class:"spinner-border spinner-border-sm me-2"},null,-1),c("span",null,"Loading tracking data...",-1)]))):jt.value&&jt.value.packet_list&&0!==jt.value.packet_list.length?(o(),d("div",U,[(o(!0),d(p,null,m(ga.value,(e,a)=>(o(),d("div",{key:a,class:y(["vtl-row","is-complete"]),role:"listitem"},[c("div",H,[c("div",K,u(ua(e.Activity_Date||e["Activity Date"]||e.activity_date||e.activityDate)),1),c("div",W,u(va(e.Activity_Time||e["Activity Time"]||e.activity_time||e.activityTime)),1)]),t[18]||(t[18]=c("div",{class:"vtl-rail"},[c("span",{class:"vtl-dot","aria-hidden":"true"})],-1)),c("div",G,[c("div",V,u(e.Staus||e.Status||e.status||"Status Update"),1),c("div",Z,[e["Reciever Name"]||e["Receiver Name"]||e.receiver_name?(o(),d("span",X," Receiver: "+u(e["Reciever Name"]||e["Receiver Name"]||e.receiver_name),1)):e.Reason||e.reason?(o(),d("span",J,"Reason: "+u(e.Reason||e.reason),1)):r("",!0)])])],2))),128)),0===pa.value.length?(o(),d("div",Q,t[19]||(t[19]=[g('<div class="no-activities-state" data-v-2fe0dc1e><div class="no-activities-icon" data-v-2fe0dc1e><i class="ri-route-line" data-v-2fe0dc1e></i></div><h6 class="no-activities-title" data-v-2fe0dc1e>No Activity Updates Yet</h6><p class="no-activities-message" data-v-2fe0dc1e> This shipment doesn&#39;t have any tracking activities recorded yet. The courier service may still be processing the shipment. </p></div>',1)]))):r("",!0)])):(o(),d("div",j,t[17]||(t[17]=[g('<div class="no-tracking-state" data-v-2fe0dc1e><div class="no-tracking-icon" data-v-2fe0dc1e><i class="ri-search-line" data-v-2fe0dc1e></i></div><h5 class="no-tracking-title" data-v-2fe0dc1e>No Tracking Information Available</h5><p class="no-tracking-message" data-v-2fe0dc1e> We couldn&#39;t find any tracking details for this shipment at the moment. This could mean the shipment is still being processed or hasn&#39;t been picked up yet. </p><div class="no-tracking-hint" data-v-2fe0dc1e><i class="ri-time-line me-1" data-v-2fe0dc1e></i><span data-v-2fe0dc1e>Tracking updates usually appear within 24-48 hours after pickup</span></div></div>',1)])))])])])]),t[75]||(t[75]=c("button",{id:"statusModalOpen","data-bs-toggle":"modal","data-bs-target":"#statusModal",style:{display:"none"}},"open",-1)),t[76]||(t[76]=c("button",{"data-bs-toggle":"modal","data-bs-target":"#cancelConfirmModal",id:"cancelModalPopup",style:{display:"none"}},"open",-1)),c("div",ee,[c("div",te,[c("div",ae,[c("div",le,[t[21]||(t[21]=g('<button type="button" class="btn-close position-absolute end-0 top-0 m-3" data-bs-dismiss="modal" aria-label="Close" data-v-2fe0dc1e></button><div class="text-danger mb-3" data-v-2fe0dc1e><i class="bi bi-exclamation-circle" style="font-size:3rem;" data-v-2fe0dc1e></i></div><h4 class="mb-2" data-v-2fe0dc1e>Are you sure?</h4><p class="text-muted" data-v-2fe0dc1e>Do you really want to cancel this shipment?</p>',4)),c("div",ie,[c("button",{onClick:t[0]||(t[0]=e=>zt.value=null),id:"hideCancelModal",type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," No "),c("button",{onClick:t[1]||(t[1]=e=>(async e=>{await k.post(route("order.cancel",{tracking_number:e,courier:"leopard"})),x.value=x.value.map(t=>t.tracking_number===e?{...t,is_cancelled:!0}:t),document.getElementById("hideCancelModal")?.click()})(zt.value)),type:"button",class:"btn btn-danger"},"Yes")])])])])]),t[77]||(t[77]=c("button",{id:"viewModalOpen","data-bs-toggle":"modal","data-bs-target":"#viewShipmentModal",style:{display:"none"}},"open",-1)),c("div",ne,[c("div",se,[c("div",de,[c("div",oe,[c("h5",ce,[t[22]||(t[22]=v(" Shipment Details ",-1)),Ft.value?(o(),d("small",re," ("+u(Ft.value.tracking_number||"—")+") ",1)):r("",!0)]),t[23]||(t[23]=c("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),c("div",ue,[Ft.value?(o(),d("div",ve,[c("div",pe,[c("div",null,[t[24]||(t[24]=c("div",{class:"label"},"Tracking #",-1)),c("div",ge,u(Ft.value.tracking_number||"—"),1)]),c("div",null,[t[25]||(t[25]=c("div",{class:"label"},"Order ID",-1)),c("div",me,u(Ft.value.order_id||"—"),1)]),c("div",null,[t[26]||(t[26]=c("div",{class:"label"},"Consignee",-1)),c("div",ye,u(Ft.value.consignee_name||"—"),1)]),c("div",null,[t[27]||(t[27]=c("div",{class:"label"},"Phone",-1)),c("div",he,u(Ft.value.consignee_phone||"—"),1)]),c("div",null,[t[28]||(t[28]=c("div",{class:"label"},"Origin → Destination",-1)),c("div",fe,u(Ft.value.origin_city||"—")+" → "+u(Ft.value.destination_city||"—"),1)]),c("div",null,[t[29]||(t[29]=c("div",{class:"label"},"COD Amount",-1)),c("div",be,u(Ht(Ft.value.cod_amount))+" PKR",1)]),c("div",null,[t[30]||(t[30]=c("div",{class:"label"},"Weight",-1)),c("div",_e,u(Ft.value.weight?Ft.value.weight+" g":"—"),1)]),c("div",null,[t[31]||(t[31]=c("div",{class:"label"},"Pieces",-1)),c("div",ke,u(Ft.value.no_of_pieces),1)]),c("div",null,[t[32]||(t[32]=c("div",{class:"label"},"Status",-1)),c("div",xe,[c("span",{class:y(["badge",ia[Ft.value.is_cancelled?"Cancelled":Ft.value.status]])},u(Ft.value.is_cancelled?"Cancelled":Ft.value.status||"—"),3)])]),c("div",null,[t[33]||(t[33]=c("div",{class:"label"},"Booking Date",-1)),c("div",Ce,u(Wt(Ft.value.created_at)),1)]),c("div",null,[t[34]||(t[34]=c("div",{class:"label"},"Consignee Address",-1)),c("div",we,u(Ft.value.consignee_address),1)]),c("div",null,[t[35]||(t[35]=c("div",{class:"label"},"Advance Payment",-1)),c("div",De,u(0==Ft.value.advance_payment?"No Advance Payment":Ft.value.advance_payment),1)])])])):r("",!0)]),c("div",Ae,[t[36]||(t[36]=c("button",{class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1)),Ft.value&&!Ft.value.is_cancelled&&"Pickup Request not Send"===Ft.value.status?(o(),d("button",{key:0,class:"btn btn-danger",onClick:t[2]||(t[2]=e=>aa(Ft.value.tracking_number)),"data-bs-dismiss":"modal"}," Cancel Shipment ")):r("",!0)])])])]),t[78]||(t[78]=c("button",{id:"invoiceModalOpen","data-bs-toggle":"modal","data-bs-target":"#invoiceModal",style:{display:"none"}},"open",-1)),c("div",Se,[c("div",Me,[c("div",Re,[t[42]||(t[42]=c("div",{class:"modal-header"},[c("h5",{class:"modal-title"},"Charges Breakdown"),c("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),c("div",Te,[c("div",Pe,[t[41]||(t[41]=c("div",{class:"invoice-title"},"Invoice",-1)),c("div",$e,[t[37]||(t[37]=c("div",null,"Invoice #",-1)),c("div",Ne,u(na.value?.shipping_charges.invoice_cheque_no),1)]),c("div",Oe,[t[38]||(t[38]=c("div",null,"Delivery Charges",-1)),c("div",null,u(na.value?.shipping_charges.delivery),1)]),c("div",ze,[c("div",null,"Fuel ("+u(na.value?.shipping_charges.fuel_surcharge_percentage)+"%)",1),c("div",null,u(na.value?.shipping_charges.fuel_surcharge_amount),1)]),c("div",Be,[c("div",null,"GST ("+u(na.value?.shipping_charges.gst)+"%)",1),c("div",null,u(na.value?.shipping_charges.gst_amount),1)]),c("div",Ee,[t[39]||(t[39]=c("div",null,"Govt Tax (4%)",-1)),c("div",null,u(na.value?.shipping_charges.tax_amount.toFixed(2)),1)]),c("div",Ie,[t[40]||(t[40]=c("div",null,"Total",-1)),c("div",null,u(na.value?.shipping_charges.gross_charges),1)])])]),t[43]||(t[43]=c("div",{class:"modal-footer"},[c("button",{class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close")],-1))])])]),Bt.value?r("",!0):(o(),d("div",Ye,[c("div",Fe,[c("form",qe,[c("div",Le,[c("div",je,[t[44]||(t[44]=c("label",null,[c("strong",null,"Date Range:")],-1)),h(c("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>Ot.dateRange=e),name:"daterange",id:"daterange",class:"form-control"},null,512),[[f,Ot.dateRange]])]),c("div",Ue,[t[46]||(t[46]=c("label",null,[c("strong",null,"Status:")],-1)),h(c("select",{name:"status","onUpdate:modelValue":t[4]||(t[4]=e=>Ot.status=e),id:"status",class:"form-control select2"},t[45]||(t[45]=[g('<option value="" data-v-2fe0dc1e>All Status</option><option value="Drop Off at Express Center" data-v-2fe0dc1e>Drop Off at Express Center</option><option value="Shipment Picked" data-v-2fe0dc1e>Shipment Picked</option><option value="Being Return" data-v-2fe0dc1e>Being Return</option><option value="Ready for Return" data-v-2fe0dc1e>Ready for Return</option><option value="Dispatched" data-v-2fe0dc1e>Dispatched</option><option value="Delivered" data-v-2fe0dc1e>Delivered</option><option value="Pending" data-v-2fe0dc1e>Pending</option><option value="Missroute" data-v-2fe0dc1e>Missroute</option><option value="Returned to shipper" data-v-2fe0dc1e>Returned to shipper</option><option value="Arrived at Station" data-v-2fe0dc1e>Arrived at Station</option><option value="Assign to Courier" data-v-2fe0dc1e>Assign to Courier</option><option value="Consignment Booked" data-v-2fe0dc1e>Consignment Booked</option><option value="Cancelled" data-v-2fe0dc1e>Cancelled</option><option value="Pickup Request Sent" data-v-2fe0dc1e>Pickup Request Sent</option><option value="48 Hours Auto Canceled" data-v-2fe0dc1e>48 Hours Auto Canceled</option><option value="Pickup Request not Send" data-v-2fe0dc1e>Pickup Request not Send</option>',17)]),512),[[b,Ot.status]])])]),c("div",He,[c("div",Ke,[t[48]||(t[48]=c("label",null,[c("strong",null,"Origin City:")],-1)),c("select",We,[t[47]||(t[47]=c("option",{value:""},"All Origins",-1)),(o(!0),d(p,null,m(Nt.value,e=>(o(),d("option",{key:e.id+"-o",value:e.city},u(e.city),9,Ge))),128))])]),c("div",Ve,[t[50]||(t[50]=c("label",null,[c("strong",null,"Destination City:")],-1)),c("select",Ze,[t[49]||(t[49]=c("option",{value:""},"All Destinations",-1)),(o(!0),d(p,null,m(Nt.value,e=>(o(),d("option",{key:e.id+"-d",value:e.city},u(e.city),9,Xe))),128))])])]),c("div",{class:"row mt-3"},[c("div",{class:"col-12"},[c("button",{onClick:Kt,type:"button",class:"btn btn-outline-secondary reset-filters-btn"},t[51]||(t[51]=[c("i",{class:"ri-refresh-line me-2"},null,-1),v(" Reset All Filters ",-1)]))])])])]),c("div",Je,[c("div",{class:"d-flex justify-content-between align-items-center px-3 pt-3"},[t[52]||(t[52]=c("h5",{class:"card-header border-0 p-0"},"Manage Booked Packets",-1)),c("div",{class:"d-flex gap-2"},[c("button",{class:"btn btn-primary",onClick:la},"Bulk Slips")])]),Et.value?(o(),d("div",Qe,t[53]||(t[53]=[c("div",{class:"loading-spinner"},null,-1),c("div",{class:"mt-3 text-muted"},"Fetching data...",-1)]))):r("",!0),c("div",et,[c("table",tt,[c("thead",null,[c("tr",null,[c("th",at,[c("input",{type:"checkbox",checked:Yt.value,onChange:Jt},null,40,lt)]),t[54]||(t[54]=c("th",{style:{"font-size":"10px","padding-left":"5px","padding-right":"5px",width:"4%"}},"S.no",-1)),t[55]||(t[55]=c("th",{style:{"font-size":"10px","padding-left":"5px",width:"1%"}},"Order ID",-1)),t[56]||(t[56]=c("th",{style:{"font-size":"10px","padding-left":"0px"}},"Tracking",-1)),t[57]||(t[57]=c("th",{style:{"font-size":"10px","padding-left":"0px"}},"Status",-1)),t[58]||(t[58]=c("th",{style:{"font-size":"10px","padding-left":"0px"}},"Customer Name",-1)),t[59]||(t[59]=c("th",{style:{"font-size":"10px","padding-left":"0px",width:"15%"}},"Address",-1)),t[60]||(t[60]=c("th",{style:{"font-size":"10px","padding-left":"0px"},class:"text-center"},"COD",-1)),t[61]||(t[61]=c("th",{style:{"font-size":"10px","padding-left":"0px"},class:"text-center"},"Recieve Amount",-1)),t[62]||(t[62]=c("th",{style:{"font-size":"10px","padding-left":"0px"}},"Action",-1))])]),c("tbody",it,[(o(!0),d(p,null,m(x.value,(e,a)=>(o(),d("tr",{key:e.id},[c("td",nt,[(o(),d("input",{class:"row-check",type:"checkbox","data-id":e.id,checked:Qt.value.get(e.id),onChange:t=>{return a=e.id,t.target.checked?It.value.includes(a)||It.value.push(a):It.value=It.value.filter(e=>e!==a),void ta();var a},key:`checkbox-${e.id}`},null,40,st))]),c("td",dt,u(a+1),1),c("td",ot,u(e.order_id),1),c("td",ct,[c("span",rt,u(e.tracking_number),1),t[63]||(t[63]=c("br",null,null,-1)),c("span",ut,u("N/A"==Wt(e.picking_time)?"Not Picked Yet":Wt(e.picking_time)),1)]),c("td",vt,[c("span",{class:y(["badge",ia[e.is_cancelled?"Cancelled":e.status]]),onClick:t=>(e=>{sa.value=e,ca(e.tracking_number),document.getElementById("statusModalOpen")?.click()})(e)},u(e.is_cancelled?"Cancelled":e.status||"—"),11,pt),t[64]||(t[64]=c("br",null,null,-1)),c("span",gt,u("N/A"==Wt(e.last_activity)?"Status not changed yet":Wt(e.last_activity)),1)]),c("td",mt,[c("span",yt,u(e.consignee_name||"—"),1),t[65]||(t[65]=c("br",null,null,-1)),c("span",ht,u(e.consignee_phone||"-"),1)]),c("td",{style:{"font-size":"12px",width:"15%","padding-left":"0px"},"data-shipment-id":e.id},[c("div",{class:"address-container",onMouseenter:t=>{return a=e.id,void((l=e.consignee_address)&&l.length>50&&(qt.value=a,i(()=>{Vt(a)})));var a,l},onMouseleave:t=>(e.id,void(qt.value=null))},[c("span",{style:{"margin-bottom":"10px"},innerHTML:Gt(e.consignee_address)},null,8,_t)],40,bt),t[66]||(t[66]=c("br",null,null,-1)),c("span",kt,u(Nt.value.filter(t=>t.id==e.destination_city)[0]?.city??e.destination_city),1)],8,ft),c("td",xt,[c("span",Ct,u(Ht(e.cod_amount)),1),t[67]||(t[67]=c("br",null,null,-1)),c("span",wt,"DC "+u(Ht(e?.shipping_charges?.shipment_charges)),1)]),c("td",Dt,[c("span",{style:{cursor:"pointer","font-weight":"600"},onClick:t=>(e=>{na.value=e,document.getElementById("invoiceModalOpen")?.click()})(e)},u(Ht(e?.shipping_charges?.receivable)),9,At),t[68]||(t[68]=c("br",null,null,-1)),t[69]||(t[69]=c("span",{style:{"font-size":"10px","background-color":"#faf5ff",padding:"2px 5px","border-radius":"10px","margin-top":"20px",border:"1px solid #ede7f6",color:"#7e57c2"}},u("17-Mar-2025"),-1))]),c("td",St,["Pickup Request not Send"===e.status?(o(),d("button",{key:0,disabled:e.is_cancelled,onClick:t=>aa(e.tracking_number),style:{color:"#dc3545",border:"none",background:"none",padding:"5px"}},t[70]||(t[70]=[c("i",{class:"ri-close-line text-[28px]",style:{color:"#dc3545"}},null,-1)]),8,Mt)):r("",!0),c("button",{onClick:t=>(e=>{Ft.value=e,document.getElementById("viewModalOpen")?.click()})(e)},t[71]||(t[71]=[c("i",{class:"ri-eye-line text-[28px]"},null,-1)]),8,Rt)])]))),128))])])])])])),qt.value?(o(),d("div",{key:1,class:"address-tooltip",style:_({left:Lt.value[qt.value]?.left+"px",top:Lt.value[qt.value]?.top+"px"})},[c("div",Tt,[t[72]||(t[72]=c("div",{class:"tooltip-header"},[c("i",{class:"ri-map-pin-line"}),c("span",null,"Full Address")],-1)),c("div",Pt,u(x.value.find(e=>e.id===qt.value)?.consignee_address||"N/A"),1)]),t[73]||(t[73]=c("div",{class:"tooltip-arrow"},null,-1))],4)):(o(),d("div",$t,t[74]||(t[74]=[c("span",{class:"loader"},null,-1)])))],64))}}),[["__scopeId","data-v-2fe0dc1e"]]);export{Nt as default};
