import{g as a,r as t,o as e,z as l,c as d,a as s,A as n,d as o,E as i,k as c,F as r,m,f as u,B as b,n as p,t as v}from"./vendor-CEpDKWGO.js";import{a as f}from"./data-C-1G2k3o.js";import{_ as y}from"./app-CnPM6qvA.js";import"./ui-B1kR6gEw.js";const g={class:"container-xxl container-p-y flex-grow-1"},h={class:"card position-relative"},_={key:0,class:"loading-overlay"},x={class:"table-responsive text-nowrap"},M={id:"myTable",class:"table-bordered table"},k={style:{display:"flex",gap:"10px"}},w=["onClick"],C=["onClick"],T={style:{display:"flex","align-items":"center","justify-content":"center","flex-direction":"column",height:"100vh"}},P={class:"modal fade",id:"deleteMaterialModal",tabindex:"-1","aria-hidden":"true"},D={class:"modal-dialog modal-md modal-simple modal-delete-user"},B={class:"modal-content"},j={class:"modal-body"},A={method:"POST",class:"text-center"},N={class:"modal fade",id:"editMaterialModal",tabindex:"-1","aria-hidden":"true"},S={class:"modal-dialog modal-lg modal-simple modal-edit-user"},E={class:"modal-content"},O={class:"modal-body p-0"},q={method:"POST",class:"row g-5"},F={class:"col-12"},I={class:"form-floating form-floating-outline"},U=["value"],z={class:"col-12 text-center"},L={class:"modal fade",id:"addMaterialModal",tabindex:"-1","aria-hidden":"true"},V={class:"modal-dialog modal-lg modal-simple modal-edit-user"},Y={class:"modal-content"},G={class:"modal-body p-0"},H={method:"POST",class:"row g-5"},J={class:"col-12"},K={class:"form-floating form-floating-outline"},Q=y(a({__name:"Index",setup(a){const y=t([]),Q=t(""),R=t(""),W=t(null),X=t(null),Z=t(!0),aa=t(!1);async function ta(){try{aa.value=!0;const a=await f.get(route("platforms.get"));y.value=a.data}catch(a){}finally{aa.value=!1}}async function ea(a){a.preventDefault();try{201===(await f.post(route("platform.create"),{platform:Q.value})).status&&(closeCreateModal.click(),Q.value="",R.value="",await ta())}catch(t){}}async function la(a){a.preventDefault();try{200===(await f.post(route("platform.update",{id:X.value}),{platform:edit_platform_name.value})).status&&(cancelMaterialButton.click(),X.value=null,await ta())}catch(t){}}async function da(a){a.preventDefault();try{200===(await f.post(route("platform.delete",{id:W.value}))).status&&(W.value=null,cancelModalButton.click(),await ta())}catch(t){}}const sa=()=>{const a=$("#myTable").DataTable();$.fn.DataTable.isDataTable("#myTable")&&a.destroy(),p(()=>{$("#myTable").DataTable({pageLength:10,lengthMenu:[[10,25,50,-1],[10,25,50,"All"]]})})};e(async()=>{await ta(),sa(),Z.value=!1});let na=!1;return l(y,()=>{na?sa():na=!0}),(a,t)=>(s(),d(r,null,[n(o("div",g,[o("div",h,[t[5]||(t[5]=o("div",{class:"card-header d-flex align-items-center justify-content-between ps-0 pb-0"},[o("h5",{class:"card-header"},"Manage Platforms"),o("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#addMaterialModal"},"Add Platform")],-1)),aa.value?(s(),d("div",_,t[3]||(t[3]=[o("div",{class:"loading-spinner"},null,-1),o("div",{class:"mt-3 text-muted"},"Fetching data...",-1)]))):c("",!0),o("div",x,[o("table",M,[t[4]||(t[4]=o("thead",null,[o("tr",null,[o("th",null,"No#"),o("th",null,"Platform Name"),o("th",null,"Action")])],-1)),o("tbody",null,[(s(!0),d(r,null,m(y.value.data,(a,t)=>(s(),d("tr",{key:a.id},[o("td",null,v(t+1),1),o("td",null,v(a.name),1),o("td",k,[o("button",{class:"btn btn-sm btn-warning editBtn",onClick:t=>X.value=a.id,"data-bs-target":"#editMaterialModal","data-bs-toggle":"modal","data-id":"1"},"Edit",8,w),o("button",{class:"btn btn-sm btn-danger deleteBtn",onClick:t=>W.value=a.id,"data-bs-toggle":"modal","data-bs-target":"#deleteMaterialModal","data-id":"1"},"Delete",8,C)])]))),128))])])])])],512),[[i,!Z.value]]),n(o("div",T,t[6]||(t[6]=[o("span",{class:"loader"},null,-1)]),512),[[i,Z.value]]),o("div",P,[o("div",D,[o("div",B,[o("div",j,[t[8]||(t[8]=o("h4",{class:"text-center mb-4"},[u("Are you sure you want to delete "),o("span",{id:"delete_material_name"}),u("?")],-1)),o("form",A,[t[7]||(t[7]=o("input",{type:"hidden",name:"material_id",id:"delete_material_id"},null,-1)),o("button",{type:"submit",onClick:da,name:"delete_material",class:"btn btn-danger me-3"},"Yes, Delete"),o("button",{type:"button",onClick:t[0]||(t[0]=a=>W.value=null),id:"cancelModalButton",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Cancel")])])])])]),o("div",N,[o("div",S,[o("div",E,[o("div",O,[t[11]||(t[11]=o("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"},null,-1)),t[12]||(t[12]=o("div",{class:"text-center mb-6"},[o("h4",{class:"mb-2"},"Edit Platform")],-1)),o("form",q,[t[10]||(t[10]=o("input",{type:"hidden",name:"material_id",id:"edit_material_id"},null,-1)),o("div",F,[o("div",I,[o("input",{type:"text",value:y.value.data?.filter(a=>a.id==X.value)[0]?.name??"",name:"platform_name",id:"edit_platform_name",class:"form-control",placeholder:"Platform Name",required:""},null,8,U),t[9]||(t[9]=o("label",{for:"edit_material_name"},"Name",-1))])]),o("div",z,[o("button",{type:"submit",onClick:la,name:"update_material",id:"updateMaterialButton",class:"btn btn-primary me-3"},"Update"),o("button",{type:"button",onClick:t[1]||(t[1]=a=>X.value=null),id:"cancelMaterialButton",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"Cancel")])])])])])]),o("div",L,[o("div",V,[o("div",Y,[o("div",G,[t[15]||(t[15]=o("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"},null,-1)),t[16]||(t[16]=o("div",{class:"mb-6 text-center"},[o("h4",{class:"mb-2"},"Add Packaging Material")],-1)),o("form",H,[o("div",J,[o("div",K,[n(o("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>Q.value=a),type:"text",name:"platform_name",class:"form-control",placeholder:"Platform Name",required:""},null,512),[[b,Q.value]]),t[13]||(t[13]=o("label",{for:"platform_name"},"Name",-1))])]),o("div",{class:"col-12 text-center"},[o("button",{type:"submit",name:"add_material",onClick:ea,class:"btn btn-primary me-3"},"Submit"),t[14]||(t[14]=o("button",{type:"button",id:"closeCreateModal",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"Cancel",-1))])])])])])])],64))}}),[["__scopeId","data-v-c394d6cd"]]);export{Q as default};
