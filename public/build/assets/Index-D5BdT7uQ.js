import{g as e,r as a,D as l,z as t,o as s,c as n,a as d,A as o,d as i,E as r,b as c,k as u,F as m,m as v,f as p,B as b,q as f,C as y,t as _,p as g,n as h}from"./vendor-DCAUJ3rR.js";import{a as k}from"./data-C-1G2k3o.js";import{_ as w}from"./app-D3meR34w.js";import"./ui-qR5y7ijB.js";const x={class:"container-xxl container-p-y flex-grow-1"},V={class:"card position-relative"},P={key:0,class:"loading-overlay"},U={class:"table-responsive text-nowrap"},C={id:"myTable",class:"table table-bordered"},N={style:{display:"flex",gap:"10px"}},M=["onClick"],A=["onClick"],D={style:{display:"flex","align-items":"center","justify-content":"center","flex-direction":"column",height:"100vh"}},S={class:"modal fade",id:"deleteMaterialModal",tabindex:"-1","aria-hidden":"true"},q={class:"modal-dialog modal-md modal-simple modal-delete-user"},T={class:"modal-content"},I={class:"modal-body"},E={method:"POST",class:"text-center"},B={class:"modal fade",id:"editMaterialModal",tabindex:"-1","aria-hidden":"true"},O={class:"modal-dialog modal-lg modal-simple modal-edit-user"},j={class:"modal-content"},F={class:"modal-body p-0"},L={method:"POST",class:"row g-5"},R={class:"col-12"},z={class:"form-floating form-floating-outline"},W=["value"],Y={class:"col-12 text-center"},G={class:"modal fade",id:"addMaterialModal",tabindex:"-1","aria-hidden":"true"},H={class:"modal-dialog modal-lg modal-simple modal-edit-user"},J={class:"modal-content"},K={class:"modal-body p-0"},Q={method:"POST",class:"row g-5"},X={class:"col-12"},Z={class:"form-floating form-floating-outline"},ee={class:"modal fade",id:"updatePaymentModal",tabindex:"-1","aria-hidden":"true"},ae={class:"modal-dialog modal-dialog-centered",style:{"max-width":"95%",width:"95%"}},le={class:"modal-content"},te={class:"modal-body p-0"},se={class:"col-md-4"},ne={class:"form-floating form-floating-outline"},de={class:"col-md-8"},oe={class:"form-floating form-floating-outline"},ie=["placeholder"],re={class:"col-12 text-center"},ce=["disabled"],ue={key:0,class:"spinner-border spinner-border-sm me-2"},me={key:0,class:"row g-4"},ve={class:"col-12"},pe={class:"card bg-light"},be={class:"card-body"},fe={class:"row g-3"},ye={class:"col-md-6"},_e={class:"mb-0"},ge={class:"col-md-6"},he={class:"mb-0"},ke={class:"col-md-6"},we={class:"mb-0"},xe={class:"col-md-6"},Ve={class:"mb-0"},Pe={class:"col-md-6"},Ue={class:"mb-0"},Ce={class:"col-md-6"},Ne={class:"mb-0"},Me={class:"col-md-6"},Ae={class:"mb-0"},De={class:"col-md-6"},Se={class:"mb-0"},qe={class:"col-md-6"},Te={class:"mb-0"},Ie={class:"col-md-6"},Ee={class:"mb-0"},Be={class:"badge bg-primary"},Oe={key:0,class:"col-12"},je={class:"mb-0"},Fe={class:"col-12"},$e={class:"card"},Le={class:"card-body"},Re={class:"table-responsive d-none d-md-block"},ze={class:"table table-bordered align-middle",id:"paymentItemsTable"},We=["onUpdate:modelValue"],Ye=["value"],Ge=["onUpdate:modelValue"],He=["value"],Je=["onUpdate:modelValue"],Ke=["onUpdate:modelValue"],Qe=["onUpdate:modelValue"],Xe=["onUpdate:modelValue"],Ze=["value"],ea=["onUpdate:modelValue"],aa=["value"],la=["onClick","disabled"],ta={class:"table-totals"},sa={class:"totals-label"},na={class:"totals-value"},da={class:"totals-value"},oa={class:"totals-value"},ia={class:"totals-value"},ra={class:"totals-value"},ca={class:"totals-label"},ua={class:"d-block d-md-none"},ma={class:"d-flex align-items-center justify-content-between mb-2"},va={class:"mb-0"},pa=["onClick","disabled"],ba={class:"row g-2"},fa={class:"col-6"},ya=["onUpdate:modelValue"],_a=["value"],ga={class:"col-6"},ha=["onUpdate:modelValue"],ka=["value"],wa={class:"col-12"},xa=["onUpdate:modelValue"],Va={class:"col-6"},Pa=["onUpdate:modelValue"],Ua={class:"col-6"},Ca=["onUpdate:modelValue"],Na={class:"col-6"},Ma=["onUpdate:modelValue"],Aa=["value"],Da={class:"col-6"},Sa=["onUpdate:modelValue"],qa={class:"col-12"},Ta={class:"alert alert-info mb-0 py-2"},Ia={class:"row mt-4"},Ea={class:"col-12 text-center"},Ba=["disabled"],Oa={key:0,class:"spinner-border spinner-border-sm me-2"},ja={key:1,class:"row g-4"},Fa={class:"col-12"},$a={class:"alert alert-info text-center"},La={key:0,class:"spinner-border spinner-border-sm me-2"},Ra={key:1},za={key:2},Wa={key:3},Ya=w(e({__name:"Index",setup(e){const w=a([]),Ya=a([]),Ga=a([]),Ha=a(""),Ja=a(""),Ka=a(null),Qa=a(null),Xa=a(!0),Za=a(!1),el=a(!1),al=a(!1),ll=a(""),tl=a("order_id"),sl=a(null),nl=a(!1),dl=a(!1),ol=a({vendor_id:"",platform_id:"",item_name:"",purchase_cost:0,item_price:0,material_id:"",advance_payment:0}),il=a([]),rl=a(!1);l(()=>{const e=ul(ol.value.material_id);return(ol.value.item_price||0)-(ol.value.purchase_cost||0)-e});const cl=l(()=>Ga.value?.data&&Ya.value?.data&&w.value?.data),ul=e=>{if(!Ga.value?.data||!Array.isArray(Ga.value.data))return 0;const a=Ga.value.data.find(a=>a.id===e);return a?a.price:0},ml=()=>{const e={id:il.value.length+1,vendor_id:"",platform_id:"",item_name:"",purchase_cost:0,item_price:0,material_id:"",advance_payment:0};il.value.push(e)},vl=e=>{il.value=il.value.filter(a=>a.id!==e),il.value.forEach((e,a)=>{e.id=a+1}),0===il.value.length&&ml()},pl=l(()=>il.value.reduce((e,a)=>{const l=ul(a.material_id);return e+((a.item_price||0)-(a.purchase_cost||0)-l)},0));async function bl(){try{Za.value=!0;const e=await k.get(route("vendors.get"));w.value=e.data}catch(e){}finally{Za.value=!1}}async function fl(e){e.preventDefault();try{201===(await k.post(route("vendor.create"),{name:Ha.value,price:Ja.value})).status&&(closeCreateModal.click(),Ha.value="",await bl())}catch(a){}}async function yl(e){e.preventDefault();try{200===(await k.post(route("vendor.update",{id:Qa.value}),{name:edit_vendor_name.value})).status&&(cancelMaterialButton.click(),Qa.value=null,await bl())}catch(a){}}async function _l(e){e.preventDefault();try{200===(await k.post(route("vendor.delete",{id:Ka.value}))).status&&(Ka.value=null,cancelModalButton.click(),await bl())}catch(a){}}t([()=>ol.value.item_price,()=>ol.value.purchase_cost,()=>ol.value.material_id],()=>{},{deep:!0});const gl=async e=>{if(e.preventDefault(),ll.value.trim())try{nl.value=!0,dl.value=!1;const e=await k.get(`/api/shipments/search?field=${tl.value}&query=${encodeURIComponent(ll.value.trim())}`);e.data.success&&e.data.data?(sl.value=e.data.data,dl.value=!0,ol.value={vendor_id:"",platform_id:"",item_name:"",purchase_cost:0,item_price:0,material_id:"",advance_payment:0},il.value=[{id:1,vendor_id:"",platform_id:"",item_name:"",purchase_cost:0,item_price:0,material_id:"",advance_payment:0}]):(alert("No payment/shipment found with the provided details. Please try again."),sl.value=null,dl.value=!1)}catch(a){404===a.response?.status?alert("No shipment found with the provided details. Please try again."):alert("Error searching for payment. Please try again."),sl.value=null,dl.value=!1}finally{nl.value=!1}else alert("Please enter a search term")},hl=async e=>{e.preventDefault();if(il.value.filter(e=>!(e.vendor_id&&e.platform_id&&e.item_name&&e.purchase_cost&&e.item_price&&e.material_id&&e.advance_payment)).length>0)alert("Please fill in all required fields for all items");else try{rl.value=!0;const e=il.value.map(e=>k.post("/api/shipments/payment/update",{shipment_id:sl.value.id,vendor_id:e.vendor_id,platform_id:e.platform_id,item_name:e.item_name,purchase_cost:e.purchase_cost,item_price:e.item_price,material_id:e.material_id,advance_payment:e.advance_payment})),a=await Promise.all(e);if(a.every(e=>e.data.success)){alert(`Payment details updated successfully for ${il.value.length} item(s)!`),dl.value=!1,sl.value=null,ll.value="";const e=bootstrap.Modal.getInstance(document.getElementById("updatePaymentModal"));e&&e.hide()}else alert("Some items failed to update. Please try again.")}catch(a){a.response?.data?.message?alert("Error updating payment: "+a.response.data.message):alert("Error updating payment. Please try again.")}finally{rl.value=!1}},kl=()=>{ll.value="",tl.value="order_id",sl.value=null,dl.value=!1,ol.value={vendor_id:"",platform_id:"",item_name:"",purchase_cost:0,item_price:0,material_id:"",advance_payment:0},il.value=[]},wl=e=>new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e),xl=()=>{const e=$("#myTable").DataTable();$.fn.DataTable.isDataTable("#myTable")&&e.destroy(),h(()=>{$("#myTable").DataTable({pageLength:10,lengthMenu:[[10,25,50,-1],[10,25,50,"All"]]})})};s(async()=>{await bl(),await async function(){try{al.value=!0;const e=await k.get(route("platforms.get"));Ya.value=e.data}catch(e){}finally{al.value=!1}}(),await async function(){try{el.value=!0;const e=await k.get(route("materials.get"));Ga.value=e.data}catch(e){}finally{el.value=!1}}(),xl(),Xa.value=!1;const e=document.getElementById("updatePaymentModal");e&&e.addEventListener("hidden.bs.modal",kl)});let Vl=!1;return t(w,()=>{Vl?xl():Vl=!0}),(e,a)=>(d(),n(m,null,[o(i("div",x,[i("div",V,[a[7]||(a[7]=c('<div class="card-header d-flex align-items-center justify-content-between ps-0 pb-0" data-v-e7f051c9><h5 class="card-header" data-v-e7f051c9>Manage Vendors</h5><div class="d-flex gap-2" data-v-e7f051c9><button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addMaterialModal" data-v-e7f051c9>Add Vendor</button><button type="button" class="btn btn-warning" data-bs-toggle="modal" data-bs-target="#updatePaymentModal" data-v-e7f051c9>Update Payment</button></div></div>',1)),Za.value?(d(),n("div",P,a[5]||(a[5]=[i("div",{class:"loading-spinner"},null,-1),i("div",{class:"mt-3 text-muted"},"Fetching data...",-1)]))):u("",!0),i("div",U,[i("table",C,[a[6]||(a[6]=i("thead",null,[i("tr",null,[i("th",null,"No#"),i("th",null,"Vendor Name"),i("th",null,"Action")])],-1)),i("tbody",null,[(d(!0),n(m,null,v(w.value.data,(e,a)=>(d(),n("tr",{key:e.id},[i("td",null,_(a+1),1),i("td",null,_(e.name),1),i("td",N,[i("button",{class:"btn btn-sm btn-warning editBtn",onClick:a=>Qa.value=e.id,"data-bs-target":"#editMaterialModal","data-bs-toggle":"modal","data-id":"1"},"Edit",8,M),i("button",{class:"btn btn-sm btn-danger deleteBtn",onClick:a=>Ka.value=e.id,"data-bs-toggle":"modal","data-bs-target":"#deleteMaterialModal","data-id":"1"},"Delete",8,A)])]))),128))])])])])],512),[[r,!Xa.value]]),o(i("div",D,a[8]||(a[8]=[i("span",{class:"loader"},null,-1)]),512),[[r,Xa.value]]),i("div",S,[i("div",q,[i("div",T,[i("div",I,[a[10]||(a[10]=i("h4",{class:"text-center mb-4"},[p("Are you sure you want to delete "),i("span",{id:"delete_material_name"}),p("?")],-1)),i("form",E,[a[9]||(a[9]=i("input",{type:"hidden",name:"material_id",id:"delete_material_id"},null,-1)),i("button",{type:"submit",onClick:_l,name:"delete_material",class:"btn btn-danger me-3"},"Yes, Delete"),i("button",{type:"button",onClick:a[0]||(a[0]=e=>Ka.value=null),id:"cancelModalButton",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Cancel")])])])])]),i("div",B,[i("div",O,[i("div",j,[i("div",F,[a[13]||(a[13]=i("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"},null,-1)),a[14]||(a[14]=i("div",{class:"text-center mb-6"},[i("h4",{class:"mb-2"},"Edit Packaging Material")],-1)),i("form",L,[a[12]||(a[12]=i("input",{type:"hidden",name:"material_id",id:"edit_material_id"},null,-1)),i("div",R,[i("div",z,[i("input",{type:"text",value:w.value.data?.filter(e=>e.id==Qa.value)[0]?.name??"",name:"vendor_name",id:"edit_vendor_name",class:"form-control",placeholder:"Vendor Name",required:""},null,8,W),a[11]||(a[11]=i("label",{for:"edit_vendor_name"},"Vendor Name",-1))])]),i("div",Y,[i("button",{type:"submit",onClick:yl,name:"update_material",id:"updateMaterialButton",class:"btn btn-primary me-3"},"Update"),i("button",{type:"button",onClick:a[1]||(a[1]=e=>Qa.value=null),id:"cancelMaterialButton",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"Cancel")])])])])])]),i("div",G,[i("div",H,[i("div",J,[i("div",K,[a[17]||(a[17]=i("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"},null,-1)),a[18]||(a[18]=i("div",{class:"mb-6 text-center"},[i("h4",{class:"mb-2"},"Add Packaging Material")],-1)),i("form",Q,[i("div",X,[i("div",Z,[o(i("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>Ha.value=e),type:"text",name:"vendor_name",class:"form-control",placeholder:"Vendor Name",required:""},null,512),[[b,Ha.value]]),a[15]||(a[15]=i("label",{for:"vendor_name"},"Name",-1))])]),i("div",{class:"col-12 text-center"},[i("button",{type:"submit",name:"add_material",onClick:fl,class:"btn btn-primary me-3"},"Submit"),a[16]||(a[16]=i("button",{type:"button",id:"closeCreateModal",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"Cancel",-1))])])])])])]),i("div",ee,[i("div",ae,[i("div",le,[i("div",te,[i("button",{type:"button",class:"btn-close",onClick:kl,"data-bs-dismiss":"modal"}),a[62]||(a[62]=i("div",{class:"mb-6 text-center"},[i("h4",{class:"mb-2"},"Update Payment"),i("p",{class:"text-muted"},"Search and update existing payment records")],-1)),i("form",{onSubmit:f(gl,["prevent"]),class:"row g-4 mb-4"},[i("div",se,[i("div",ne,[o(i("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>tl.value=e),class:"form-select",required:""},a[19]||(a[19]=[i("option",{value:"order_id"},"Order ID",-1),i("option",{value:"tracking_number"},"Tracking Number",-1),i("option",{value:"consignee_name"},"Customer Name",-1),i("option",{value:"consignee_phone"},"Phone Number",-1)]),512),[[y,tl.value]]),a[20]||(a[20]=i("label",null,"Search Field",-1))])]),i("div",de,[i("div",oe,[o(i("input",{"onUpdate:modelValue":a[4]||(a[4]=e=>ll.value=e),type:"text",class:"form-control",placeholder:"Enter "+("order_id"===tl.value?"Order ID":"tracking_number"===tl.value?"Tracking Number":"consignee_name"===tl.value?"Customer Name":"Phone Number"),required:""},null,8,ie),[[b,ll.value]]),i("label",null,_("order_id"===tl.value?"Order ID":"tracking_number"===tl.value?"Tracking Number":"consignee_name"===tl.value?"Customer Name":"Phone Number"),1)])]),i("div",re,[i("button",{type:"submit",class:"btn btn-warning me-3",disabled:nl.value},[nl.value?(d(),n("span",ue)):u("",!0),p(" "+_(nl.value?"Searching...":"Search Payment"),1)],8,ce),i("button",{type:"button",onClick:kl,class:"btn btn-outline-secondary me-2"},"Reset"),a[21]||(a[21]=i("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"Cancel",-1))])],32),dl.value&&sl.value&&cl.value?(d(),n("div",me,[i("div",ve,[i("div",pe,[a[33]||(a[33]=i("div",{class:"card-header"},[i("h6",{class:"mb-0"},[i("i",{class:"ri-information-line me-2"}),p("Found Order Details")])],-1)),i("div",be,[i("div",fe,[i("div",ye,[a[22]||(a[22]=i("label",{class:"form-label fw-bold"},"Order ID:",-1)),i("p",_e,_(sl.value.order_id||"N/A"),1)]),i("div",ge,[a[23]||(a[23]=i("label",{class:"form-label fw-bold"},"Tracking Number:",-1)),i("p",he,_(sl.value.tracking_number||"N/A"),1)]),i("div",ke,[a[24]||(a[24]=i("label",{class:"form-label fw-bold"},"Customer Name:",-1)),i("p",we,_(sl.value.consignee_name||"N/A"),1)]),i("div",xe,[a[25]||(a[25]=i("label",{class:"form-label fw-bold"},"Phone Number:",-1)),i("p",Ve,_(sl.value.consignee_phone||"N/A"),1)]),i("div",Pe,[a[26]||(a[26]=i("label",{class:"form-label fw-bold"},"Destination City:",-1)),i("p",Ue,_(sl.value.destination_city||"N/A"),1)]),i("div",Ce,[a[27]||(a[27]=i("label",{class:"form-label fw-bold"},"COD Amount:",-1)),i("p",Ne,_(sl.value.cod_amount||"N/A"),1)]),i("div",Me,[a[28]||(a[28]=i("label",{class:"form-label fw-bold"},"Shipment Type:",-1)),i("p",Ae,_(sl.value.shipment_type||"N/A"),1)]),i("div",De,[a[29]||(a[29]=i("label",{class:"form-label fw-bold"},"Weight:",-1)),i("p",Se,_(sl.value.weight?`${sl.value.weight} kg`:"N/A"),1)]),i("div",qe,[a[30]||(a[30]=i("label",{class:"form-label fw-bold"},"No. of Pieces:",-1)),i("p",Te,_(sl.value.no_of_pieces||"N/A"),1)]),i("div",Ie,[a[31]||(a[31]=i("label",{class:"form-label fw-bold"},"Status:",-1)),i("p",Ee,[i("span",Be,_(sl.value.status||"N/A"),1)])]),sl.value.consignee_address?(d(),n("div",Oe,[a[32]||(a[32]=i("label",{class:"form-label fw-bold"},"Delivery Address:",-1)),i("p",je,_(sl.value.consignee_address),1)])):u("",!0)])])])]),i("div",Fe,[i("div",$e,[i("div",{class:"card-header d-flex align-items-center justify-content-between"},[a[34]||(a[34]=i("h6",{class:"mb-0"},[i("i",{class:"ri-money-dollar-circle-line me-2"}),p("Update Payment Details")],-1)),i("button",{type:"button",onClick:ml,class:"btn btn-sm btn-success"},"+")]),i("div",Le,[i("form",{onSubmit:f(hl,["prevent"])},[i("div",Re,[i("table",ze,[i("thead",{class:"table-light"},[i("tr",null,[a[35]||(a[35]=i("th",null,"Vendor",-1)),a[36]||(a[36]=i("th",null,"Platform",-1)),a[37]||(a[37]=i("th",null,"Product Name",-1)),a[38]||(a[38]=i("th",null,"Cost",-1)),a[39]||(a[39]=i("th",null,"Selling",-1)),a[40]||(a[40]=i("th",null,"Packaging Material",-1)),a[41]||(a[41]=i("th",null,"Advance Payment",-1)),a[42]||(a[42]=i("th",null,"Profit",-1)),i("th",{style:{width:"64px"}},[i("button",{type:"button",class:"btn btn-sm btn-success",onClick:ml},"+")])])]),i("tbody",null,[(d(!0),n(m,null,v(il.value,e=>(d(),n("tr",{key:e.id},[i("td",null,[o(i("select",{"onUpdate:modelValue":a=>e.vendor_id=a,class:"form-select",required:""},[a[43]||(a[43]=i("option",{value:""},"Select Vendor",-1)),(d(!0),n(m,null,v(w.value.data||[],e=>(d(),n("option",{key:e.id,value:e.id},_(e.name),9,Ye))),128))],8,We),[[y,e.vendor_id]])]),i("td",null,[o(i("select",{"onUpdate:modelValue":a=>e.platform_id=a,class:"form-select",required:""},[a[44]||(a[44]=i("option",{value:""},"Select Platform",-1)),(d(!0),n(m,null,v(Ya.value.data||[],e=>(d(),n("option",{key:e.id,value:e.id},_(e.name),9,He))),128))],8,Ge),[[y,e.platform_id]])]),i("td",null,[o(i("input",{type:"text","onUpdate:modelValue":a=>e.item_name=a,class:"form-control",required:""},null,8,Je),[[b,e.item_name]])]),i("td",null,[o(i("input",{type:"number",step:"0.01","onUpdate:modelValue":a=>e.purchase_cost=a,class:"form-control",required:""},null,8,Ke),[[b,e.purchase_cost,void 0,{number:!0}]])]),i("td",null,[o(i("input",{type:"number",step:"0.01","onUpdate:modelValue":a=>e.item_price=a,class:"form-control",required:""},null,8,Qe),[[b,e.item_price,void 0,{number:!0}]])]),i("td",null,[o(i("select",{"onUpdate:modelValue":a=>e.material_id=a,class:"form-select",required:""},[a[45]||(a[45]=i("option",{value:""},"Select Material",-1)),(d(!0),n(m,null,v(Ga.value.data||[],e=>(d(),n("option",{key:e.id,value:e.id},_(e.name)+" ("+_(e.price)+") ",9,Ze))),128))],8,Xe),[[y,e.material_id]])]),i("td",null,[o(i("input",{type:"number",step:"0.01","onUpdate:modelValue":a=>e.advance_payment=a,class:"form-control",required:""},null,8,ea),[[b,e.advance_payment,void 0,{number:!0}]])]),i("td",null,[i("input",{type:"number",value:(e.item_price||0)-(e.purchase_cost||0)-ul(e.material_id),class:"form-control",readonly:""},null,8,aa)]),i("td",null,[i("button",{type:"button",class:"btn btn-sm btn-danger",onClick:a=>vl(e.id),disabled:1===il.value.length},"-",8,la)])]))),128)),i("tr",ta,[a[46]||(a[46]=i("td",{class:"totals-label"},[i("strong",null,"Total")],-1)),i("td",sa,[i("strong",null,_(il.value.length)+" Items",1)]),a[47]||(a[47]=i("td",{class:"totals-label"},[i("strong",null,"—")],-1)),i("td",na,[i("strong",null,_(wl(il.value.reduce((e,a)=>e+(a.purchase_cost||0),0))),1)]),i("td",da,[i("strong",null,_(wl(il.value.reduce((e,a)=>e+(a.item_price||0),0))),1)]),i("td",oa,[i("strong",null,_(wl(il.value.reduce((e,a)=>e+ul(a.material_id),0))),1)]),i("td",ia,[i("strong",null,_(wl(il.value.reduce((e,a)=>e+(a.advance_payment||0),0))),1)]),i("td",ra,[i("strong",{class:g({"text-danger":pl.value<0,"text-success":pl.value>0})},_(wl(pl.value)),3)]),i("td",ca,[i("strong",null,_(il.value.reduce((e,a)=>e+(a.item_price||0),0)>0?(pl.value/il.value.reduce((e,a)=>e+(a.item_price||0),0)*100).toFixed(1):0)+"%",1)])])])])]),i("div",ua,[(d(!0),n(m,null,v(il.value,e=>(d(),n("div",{key:"m-"+e.id,class:"item-card mb-3 p-3 border rounded"},[i("div",ma,[i("h6",va,"Item #"+_(e.id),1),i("button",{type:"button",onClick:a=>vl(e.id),class:"btn btn-sm btn-outline-danger",disabled:1===il.value.length},a[48]||(a[48]=[i("i",{class:"ri-delete-bin-line"},null,-1)]),8,pa)]),i("div",ba,[i("div",fa,[a[50]||(a[50]=i("label",{class:"form-label small"},"Vendor",-1)),o(i("select",{"onUpdate:modelValue":a=>e.vendor_id=a,class:"form-select form-select-sm",required:""},[a[49]||(a[49]=i("option",{value:""},"Select Vendor",-1)),(d(!0),n(m,null,v(w.value.data||[],e=>(d(),n("option",{key:e.id,value:e.id},_(e.name),9,_a))),128))],8,ya),[[y,e.vendor_id]])]),i("div",ga,[a[52]||(a[52]=i("label",{class:"form-label small"},"Platform",-1)),o(i("select",{"onUpdate:modelValue":a=>e.platform_id=a,class:"form-select form-select-sm",required:""},[a[51]||(a[51]=i("option",{value:""},"Select Platform",-1)),(d(!0),n(m,null,v(Ya.value.data||[],e=>(d(),n("option",{key:e.id,value:e.id},_(e.name),9,ka))),128))],8,ha),[[y,e.platform_id]])]),i("div",wa,[a[53]||(a[53]=i("label",{class:"form-label small"},"Product Name",-1)),o(i("input",{"onUpdate:modelValue":a=>e.item_name=a,type:"text",class:"form-control form-control-sm",required:""},null,8,xa),[[b,e.item_name]])]),i("div",Va,[a[54]||(a[54]=i("label",{class:"form-label small"},"Cost",-1)),o(i("input",{"onUpdate:modelValue":a=>e.purchase_cost=a,type:"number",step:"0.01",class:"form-control form-control-sm",required:""},null,8,Pa),[[b,e.purchase_cost]])]),i("div",Ua,[a[55]||(a[55]=i("label",{class:"form-label small"},"Selling",-1)),o(i("input",{"onUpdate:modelValue":a=>e.item_price=a,type:"number",step:"0.01",class:"form-control form-control-sm",required:""},null,8,Ca),[[b,e.item_price]])]),i("div",Na,[a[57]||(a[57]=i("label",{class:"form-label small"},"Packaging Material",-1)),o(i("select",{"onUpdate:modelValue":a=>e.material_id=a,class:"form-select form-select-sm",required:""},[a[56]||(a[56]=i("option",{value:""},"Select Material",-1)),(d(!0),n(m,null,v(Ga.value.data||[],e=>(d(),n("option",{key:e.id,value:e.id},_(e.name)+" ("+_(e.price)+") ",9,Aa))),128))],8,Ma),[[y,e.material_id]])]),i("div",Da,[a[58]||(a[58]=i("label",{class:"form-label small"},"Advance Payment",-1)),o(i("input",{"onUpdate:modelValue":a=>e.advance_payment=a,type:"number",step:"0.01",class:"form-control form-control-sm",required:""},null,8,Sa),[[b,e.advance_payment]])]),i("div",qa,[i("div",Ta,[a[59]||(a[59]=i("strong",null,"Profit:",-1)),p(" "+_(wl((e.item_price||0)-(e.purchase_cost||0)-ul(e.material_id))),1)])])])]))),128)),i("div",{class:"text-center mt-3"},[i("button",{type:"button",onClick:ml,class:"btn btn-success"},a[60]||(a[60]=[i("i",{class:"ri-add-line me-1"},null,-1),p("Add Item ",-1)]))])]),i("div",Ia,[i("div",Ea,[i("button",{type:"submit",class:"btn btn-warning me-3",disabled:rl.value},[rl.value?(d(),n("span",Oa)):u("",!0),p(" "+_(rl.value?"Updating...":"Update Payment"),1)],8,Ba),a[61]||(a[61]=i("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"Cancel",-1))])])],32)])])])])):u("",!0),dl.value&&sl.value&&!cl.value?(d(),n("div",ja,[i("div",Fa,[i("div",$a,[el.value||al.value?(d(),n("div",La)):u("",!0),el.value?(d(),n("span",Ra,"Loading materials...")):al.value?(d(),n("span",za,"Loading platforms...")):(d(),n("span",Wa,"Loading payment form data..."))])])])):u("",!0)])])])])],64))}}),[["__scopeId","data-v-e7f051c9"]]);export{Ya as default};
