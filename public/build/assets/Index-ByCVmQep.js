import{g as e,r as a,y as t,o as l,n,z as i,D as s,c as d,a as o,d as c,k as r,t as u,f as p,F as v,m as g,b as m,p as b,A as y,B as h,C as f,s as x}from"./vendor-DCAUJ3rR.js";import{a as _}from"./data-C-1G2k3o.js";import{_ as k}from"./app-D3meR34w.js";import"./ui-qR5y7ijB.js";const C={class:"modal fade",id:"statusModal",tabindex:"-1","aria-hidden":"true"},w={class:"modal-dialog modal-dialog-centered modal-lg"},S={class:"modal-content status-modal p-0"},A={class:"sm-hero"},D={class:"sm-loc"},M={class:"sm-city"},R={class:"sm-state"},N={class:"sm-chip"},T={class:"sm-date"},P={class:"sm-loc"},O={class:"sm-city"},z={class:"sm-card"},B={class:"sm-summary"},E={class:"sm-col"},I={class:"sm-table"},Y={class:"sm-col"},q={class:"sm-table"},F={class:"sm-card sm-timeline"},L={key:0,class:"text-center py-4"},j={key:1,class:"text-center py-4 text-muted"},H={key:2,class:"vtl",role:"list"},U={class:"vtl-meta"},K={class:"vtl-date"},W={class:"vtl-time"},G={class:"vtl-content"},V={class:"vtl-title"},Z={class:"vtl-sub"},J={key:0},X={key:1},Q={key:0,class:"text-center py-4 text-muted"},ee={class:"modal fade",id:"cancelConfirmModal",tabindex:"-1","aria-hidden":"true"},ae={class:"modal-dialog modal-dialog-centered"},te={class:"modal-content p-4 text-center"},le={class:"modal-body"},ne={class:"d-flex justify-content-center mt-3 gap-3"},ie={class:"modal fade",id:"viewShipmentModal",tabindex:"-1","aria-hidden":"true"},se={class:"modal-dialog modal-lg modal-dialog-centered"},de={class:"modal-content p-3"},oe={class:"modal-header"},ce={class:"modal-title"},re={key:0,class:"ms-2 text-muted"},ue={class:"modal-body"},pe={key:0,class:"details-inner"},ve={class:"details-grid"},ge={class:"value"},me={class:"value"},be={class:"value"},ye={class:"value"},he={class:"value"},fe={class:"value"},xe={class:"value"},_e={class:"value"},ke={class:"value"},Ce={class:"value"},we={class:"value"},Se={class:"value"},Ae={class:"modal-footer"},De={class:"modal fade",id:"invoiceModal",tabindex:"-1","aria-hidden":"true"},Me={class:"modal-dialog modal-sm modal-dialog-centered"},Re={class:"modal-content p-3"},Ne={class:"modal-body"},Te={class:"invoice-card"},Pe={class:"invoice-row",style:{"margin-bottom":"6px"}},Oe={class:"invoice-number"},$e={class:"invoice-row"},ze={class:"invoice-row"},Be={class:"invoice-row"},Ee={class:"invoice-row"},Ie={class:"invoice-row total"},Ye={key:0,class:"container-xxl container-p-y flex-grow-1"},qe={class:"card mb-4 p-3"},Fe={id:"filterForm"},Le={class:"row"},je={class:"col-md-6"},He={class:"col-md-6"},Ue={class:"row mt-2"},Ke={class:"col-md-6"},We={id:"origin_city",class:"form-control select2"},Ge=["value"],Ve={class:"col-md-6"},Ze={id:"destination_city",class:"form-control select2"},Je=["value"],Xe={class:"card position-relative"},Qe={key:0,class:"loading-overlay"},ea={class:"table-responsive text-nowrap",id:"packetTableWrapper"},aa={id:"myTable",class:"table-bordered table align-middle",style:{"font-size":"12px"}},ta={style:{"text-align":"center","padding-left":"5px","padding-right":"0px"}},la=["checked"],na={id:"packetTableBody"},ia={style:{"text-align":"center"}},sa=["data-id","checked","onChange"],da={style:{"padding-left":"0px","padding-right":"0px"}},oa={style:{"padding-left":"5px"}},ca={style:{"padding-left":"0px"}},ra={style:{"font-weight":"bold"}},ua={style:{"font-size":"10px","background-color":"#faf5ff",padding:"2px 5px","border-radius":"10px","margin-top":"20px",border:"1px solid #ede7f6",color:"#7e57c2"}},pa={style:{"padding-left":"0px","padding-right":"0px"}},va=["onClick"],ga={style:{"font-size":"10px",padding:"2px 5px","margin-top":"20px","border-radius":"10px"}},ma={class:"text-truncate",style:{"max-width":"160px","padding-left":"0px"}},ba={style:{"font-weight":"bold"}},ya={style:{"font-size":"10px","background-color":"#faf5ff",padding:"2px 5px","border-radius":"10px","margin-top":"20px",border:"1px solid #ede7f6",color:"#7e57c2"}},ha=["data-shipment-id"],fa=["onMouseenter","onMouseleave"],xa=["innerHTML"],_a={style:{"font-size":"10px","background-color":"#faf5ff",padding:"2px 5px","border-radius":"10px","margin-top":"20px",border:"1px solid #ede7f6",color:"#7e57c2"}},ka={style:{width:"10%","padding-left":"0px","padding-right":"0px","text-align":"center"}},Ca={style:{"font-weight":"bold"}},wa={style:{"font-size":"10px","background-color":"#faf5ff",padding:"2px 5px","border-radius":"10px","margin-top":"20px",border:"1px solid #ede7f6",color:"#7e57c2"}},Sa={style:{"padding-left":"0px","padding-right":"0px","text-align":"center"}},Aa=["onClick"],Da={class:"d-flex gap-2",style:{"padding-top":"30px"}},Ma=["disabled","onClick"],Ra=["onClick"],Na={class:"tooltip-content"},Ta={class:"tooltip-body"},Pa={key:2,style:{display:"flex","align-items":"center","justify-content":"center","flex-direction":"column",height:"100vh"}},Oa=k(e({__name:"Index",setup(e){a(1);const k=a([]),Oa=a([]),$a=t({dateRange:"",status:"",originCity:"",destination_city:""}),za=a(null),Ba=a(!0),Ea=a(!1),Ia=a([]),Ya=a(!1),qa=a(null),Fa=a(null),La=a({}),ja=a(null),Ha=a(!1),Ua=e=>e??0===e?new Intl.NumberFormat("en-PK").format(Number(e)):"—";function Ka(e){if(!e)return"17-March-2003";const a=new Date(e);return`${String(a.getDate()).padStart(2,"0")}-${a.toLocaleString("en-US",{month:"long"})}-${a.getFullYear()}`}const Wa=e=>{if(!e)return"—";if(e.length<=25)return e;const a=[];for(let t=0;t<e.length;t+=25)a.push(e.substring(t,t+25));if(e.length>50){return a.slice(0,2).join("<br>")+'<br><span style="color: #6c757d; font-style: italic;">...</span>'}return a.join("<br>")},Ga=e=>{const a=document.querySelector(`[data-shipment-id="${e}"] .address-container`);if(a){const t=a.getBoundingClientRect();La.value[e]={left:t.left+t.width/2,top:t.top-120}}},Va=()=>{n(()=>{const e=document.querySelectorAll("input.row-check"),a=Array.from(e).map(e=>Number(e.dataset.id)),t=a.length>0&&a.every(e=>Ia.value.includes(e));Ya.value=t})},Za=()=>{const e="#myTable";$.fn.DataTable.isDataTable(e)&&$(e).DataTable().destroy(),n(()=>{const a=$(e).DataTable({autoWidth:!0,scrollX:!0,columnDefs:[{targets:"_all",className:"align-middle"}]}),t=()=>a.columns.adjust();$(window).on("resize.dt",t),window.addEventListener("orientationchange",t),document.addEventListener("shown.bs.modal",t),document.addEventListener("shown.bs.tab",t),a.on("draw",()=>Va()),Va()})};l(async()=>{await(async()=>{try{Ea.value=!0;const e=await _.get("/api/shipments");k.value=e.data.data||[]}catch(e){}finally{Ea.value=!1}})(),await(async()=>{try{const e=await _.get(route("courier.cities",{courier:"leopard"}));Oa.value=e.data.data||[]}catch(e){}})(),n(()=>{Za(),n(()=>{$("#origin_city").select2().on("change",e=>{$a.originCity=$(e.target).val()}),$("#destination_city").select2().on("change",e=>{$a.destination_city=$(e.target).val()}),$("#daterange").daterangepicker({locale:{format:"YYYY-MM-DD"}},function(e,a){$a.dateRange=`${e.format("YYYY-MM-DD")} - ${a.format("YYYY-MM-DD")}`})})}),Ba.value=!1}),i($a,async e=>{const a=await _.get(route("shipments.index"),{params:{date_from:e.dateRange.split(" - ")[0],date_to:e.dateRange.split(" - ")[1],status:e.status,origin_city:e.originCity,destination_city:e.destination_city}});k.value=a.data.data||[],Za()});const Ja=()=>{const e=document.querySelectorAll("input.row-check"),a=[];if(e.forEach(e=>{const t=Number(e.dataset.id);a.push(t)}),Ya.value){const e=new Set(a);Ia.value=Ia.value.filter(a=>!e.has(a)),Ya.value=!1}else{const e=new Set(Ia.value);a.forEach(a=>e.add(a)),Ia.value=Array.from(e),Ya.value=!0}},Xa=e=>{za.value=e,document.getElementById("cancelModalPopup")?.click()},Qa=()=>{const e=Ia.value.join(","),a=e.length?route("slips.merged",{ids:e}):route("slips.merged");window.open(a,"_blank")},et={"Drop Off at Express Center":"drop-off","Shipment Picked":"shipment-picked","Being Return":"being-return","Ready for Return":"ready-for-return",Dispatched:"dispatched",Delivered:"delivered",Pending:"pending",Missroute:"missroute","Returned to shipper":"returned-to-shipper","Arrived at Station":"arrived-at-station","Assign to Courier":"assign-to-courier","Consignment Booked":"consignment-booked",Cancelled:"cancelled","Pickup Request Sent":"pickup-request-sent","48 Hours Auto Canceled":"auto-canceled","Pickup Request not Send":"pickup-request-not-sent"},at=a(null),tt=a(null),lt={Delivered:"/images/status/delivered.png",Dispatched:"/images/status/dispatched.png",Pending:"/images/status/pending.png",Cancelled:"/images/status/cancelled.png"},nt=s(()=>tt.value?tt.value.is_cancelled?"Cancelled":tt.value.status||"—":"—");s(()=>lt[nt.value]||"/images/status/placeholder.png");const it=async e=>{if(e)try{Ha.value=!0,ja.value=null;const a=await _.get(`/api/shipments/track/${e}`);a.data.success&&(ja.value=a.data.data,ja.value)}catch(a){}finally{Ha.value=!1}},st=e=>{const a=Number(e);return Number.isFinite(a)?(a/1e3).toFixed(3):"—"},dt=e=>{if(!e)return"17-March-2003";try{const a=new Date(e),t=String(a.getDate()).padStart(2,"0"),l=a.toLocaleString("en-US",{month:"long"});return`${t}-${l}-${a.getFullYear()}`}catch(a){return"17-March-2003"}},ot=e=>{if(!e)return"1:00 AM";try{if(e.includes("-")||e.includes("/")){return new Date(e).toLocaleString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}if(e.includes(":")||e.includes("AM")||e.includes("PM")){const a=e.split(":");if(a.length>=2){let t=parseInt(a[0]);const l=a[1].replace(/\D/g,""),n=e.includes("PM")?"PM":"AM";return 0===t?t=12:t>12&&(t-=12),`${t}:${l.padStart(2,"0")} ${n}`}}return e}catch(a){return"1:00 AM"}};s(()=>materials.value?.data&&platforms.value?.data&&vendors.value?.data);const ct=s(()=>{if(!ja.value?.packet_list?.[0])return[];const e=ja.value.packet_list[0],a=e["Tracking Detail"]||e.tracking_detail||e.trackingDetail||[];return a.length,Array.isArray(a)?a:[]});return(e,a)=>(o(),d(v,null,[c("div",C,[c("div",w,[c("div",S,[c("div",A,[c("div",D,[a[5]||(a[5]=c("div",{class:"sm-label"},"From",-1)),c("div",M,u(tt.value?.origin_city??"—"),1)]),c("div",R,[c("span",N,u(nt.value),1),c("div",T,u(Ka(tt.value?.last_activity)),1)]),c("div",P,[a[6]||(a[6]=c("div",{class:"sm-label"},"To",-1)),c("div",O,u(tt.value?.destination_city??"—"),1)])]),c("section",z,[a[15]||(a[15]=c("header",{class:"sm-card-title"},"Shipment Summary",-1)),c("div",B,[c("div",E,[c("table",I,[c("tbody",null,[c("tr",null,[a[7]||(a[7]=c("th",null,"Tracking #",-1)),c("td",null,u(tt.value?.tracking_number??"—"),1)]),c("tr",null,[a[8]||(a[8]=c("th",null,"No. of pieces",-1)),c("td",null,u(ja.value?.packet_list?.[0]?.booked_packet_no_piece??tt.value?.no_of_pieces??"—"),1)]),c("tr",null,[a[9]||(a[9]=c("th",null,"Shipper name",-1)),c("td",null,u(ja.value?.packet_list?.[0]?.shipment_name_eng??"ZEBTAN COLLECTION"),1)]),c("tr",null,[a[10]||(a[10]=c("th",null,"Shipper address",-1)),c("td",null,[p(u(ja.value?.packet_list?.[0]?.shipment_address??"FLAT NO 8 REHMAN MANZIL STREET NO 6 BURNS ROAD KARACHI")+" ",1),tt.value?.origin_city?(o(),d(v,{key:0},[p(", "+u(tt.value?.origin_city),1)],64)):r("",!0)])])])])]),c("div",Y,[c("table",q,[c("tbody",null,[c("tr",null,[a[11]||(a[11]=c("th",null,"Reference # / Order ID",-1)),c("td",null,u(ja.value?.packet_list?.[0]?.booked_packet_order_id??tt.value?.order_id??"—"),1)]),c("tr",null,[a[12]||(a[12]=c("th",null,"Packet weight",-1)),c("td",null,u(st(ja.value?.packet_list?.[0]?.booked_packet_weight??tt.value?.weight))+" (Kgs)",1)]),c("tr",null,[a[13]||(a[13]=c("th",null,"Consignee name",-1)),c("td",null,u(ja.value?.packet_list?.[0]?.consignment_name_eng??tt.value?.consignee_name??"—"),1)]),c("tr",null,[a[14]||(a[14]=c("th",null,"Consignee address",-1)),c("td",null,[p(u(ja.value?.packet_list?.[0]?.consignment_address??tt.value?.consignee_address??"—")+" ",1),tt.value?.destination_city?(o(),d(v,{key:0},[p(", "+u(tt.value?.destination_city),1)],64)):r("",!0)])])])])])])]),c("section",F,[a[22]||(a[22]=c("header",{class:"sm-card-title"},"Tracking Timeline",-1)),Ha.value?(o(),d("div",L,a[16]||(a[16]=[c("div",{class:"spinner-border spinner-border-sm me-2"},null,-1),c("span",null,"Loading tracking data...",-1)]))):ja.value&&ja.value.packet_list&&0!==ja.value.packet_list.length?(o(),d("div",H,[(o(!0),d(v,null,g(ct.value,(e,t)=>(o(),d("div",{key:t,class:b(["vtl-row","is-complete"]),role:"listitem"},[c("div",U,[c("div",K,u(dt(e.Activity_Date||e["Activity Date"]||e.activity_date||e.activityDate)),1),c("div",W,u(ot(e.Activity_Time||e["Activity Time"]||e.activity_time||e.activityTime)),1)]),a[18]||(a[18]=c("div",{class:"vtl-rail"},[c("span",{class:"vtl-dot","aria-hidden":"true"})],-1)),c("div",G,[c("div",V,u(e.Staus||e.Status||e.status||"Status Update"),1),c("div",Z,[e["Reciever Name"]||e["Receiver Name"]||e.receiver_name?(o(),d("span",J," Receiver: "+u(e["Reciever Name"]||e["Receiver Name"]||e.receiver_name),1)):e.Reason||e.reason?(o(),d("span",X,"Reason: "+u(e.Reason||e.reason),1)):r("",!0)])])],2))),128)),0===ct.value.length?(o(),d("div",Q,[a[19]||(a[19]=c("i",{class:"ri-information-line me-2"},null,-1)),a[20]||(a[20]=c("span",null,"No tracking activities found in the response",-1)),a[21]||(a[21]=c("br",null,null,-1)),c("small",null,"Available data: "+u(JSON.stringify(ja.value.packet_list?.[0]||{},null,2)),1)])):r("",!0)])):(o(),d("div",j,a[17]||(a[17]=[c("i",{class:"ri-information-line me-2"},null,-1),c("span",null,"No tracking data available",-1)])))])])])]),a[76]||(a[76]=c("button",{id:"statusModalOpen","data-bs-toggle":"modal","data-bs-target":"#statusModal",style:{display:"none"}},"open",-1)),a[77]||(a[77]=c("button",{"data-bs-toggle":"modal","data-bs-target":"#cancelConfirmModal",id:"cancelModalPopup",style:{display:"none"}},"open",-1)),c("div",ee,[c("div",ae,[c("div",te,[c("div",le,[a[23]||(a[23]=m('<button type="button" class="btn-close position-absolute end-0 top-0 m-3" data-bs-dismiss="modal" aria-label="Close" data-v-b54c0c67></button><div class="text-danger mb-3" data-v-b54c0c67><i class="bi bi-exclamation-circle" style="font-size:3rem;" data-v-b54c0c67></i></div><h4 class="mb-2" data-v-b54c0c67>Are you sure?</h4><p class="text-muted" data-v-b54c0c67>Do you really want to cancel this shipment?</p>',4)),c("div",ne,[c("button",{onClick:a[0]||(a[0]=e=>za.value=null),id:"hideCancelModal",type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," No "),c("button",{onClick:a[1]||(a[1]=e=>(async e=>{await _.post(route("order.cancel",{tracking_number:e,courier:"leopard"})),k.value=k.value.map(a=>a.tracking_number===e?{...a,is_cancelled:!0}:a),document.getElementById("hideCancelModal")?.click()})(za.value)),type:"button",class:"btn btn-danger"},"Yes")])])])])]),a[78]||(a[78]=c("button",{id:"viewModalOpen","data-bs-toggle":"modal","data-bs-target":"#viewShipmentModal",style:{display:"none"}},"open",-1)),c("div",ie,[c("div",se,[c("div",de,[c("div",oe,[c("h5",ce,[a[24]||(a[24]=p(" Shipment Details ",-1)),qa.value?(o(),d("small",re," ("+u(qa.value.tracking_number||"—")+") ",1)):r("",!0)]),a[25]||(a[25]=c("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),c("div",ue,[qa.value?(o(),d("div",pe,[c("div",ve,[c("div",null,[a[26]||(a[26]=c("div",{class:"label"},"Tracking #",-1)),c("div",ge,u(qa.value.tracking_number||"—"),1)]),c("div",null,[a[27]||(a[27]=c("div",{class:"label"},"Order ID",-1)),c("div",me,u(qa.value.order_id||"—"),1)]),c("div",null,[a[28]||(a[28]=c("div",{class:"label"},"Consignee",-1)),c("div",be,u(qa.value.consignee_name||"—"),1)]),c("div",null,[a[29]||(a[29]=c("div",{class:"label"},"Phone",-1)),c("div",ye,u(qa.value.consignee_phone||"—"),1)]),c("div",null,[a[30]||(a[30]=c("div",{class:"label"},"Origin → Destination",-1)),c("div",he,u(qa.value.origin_city||"—")+" → "+u(qa.value.destination_city||"—"),1)]),c("div",null,[a[31]||(a[31]=c("div",{class:"label"},"COD Amount",-1)),c("div",fe,u(Ua(qa.value.cod_amount))+" PKR",1)]),c("div",null,[a[32]||(a[32]=c("div",{class:"label"},"Weight",-1)),c("div",xe,u(qa.value.weight?qa.value.weight+" g":"—"),1)]),c("div",null,[a[33]||(a[33]=c("div",{class:"label"},"Pieces",-1)),c("div",_e,u(qa.value.no_of_pieces),1)]),c("div",null,[a[34]||(a[34]=c("div",{class:"label"},"Status",-1)),c("div",ke,[c("span",{class:b(["badge",et[qa.value.is_cancelled?"Cancelled":qa.value.status]])},u(qa.value.is_cancelled?"Cancelled":qa.value.status||"—"),3)])]),c("div",null,[a[35]||(a[35]=c("div",{class:"label"},"Booking Date",-1)),c("div",Ce,u(Ka(qa.value.created_at)),1)]),c("div",null,[a[36]||(a[36]=c("div",{class:"label"},"Consignee Address",-1)),c("div",we,u(qa.value.consignee_address),1)]),c("div",null,[a[37]||(a[37]=c("div",{class:"label"},"Advance Payment",-1)),c("div",Se,u(0==qa.value.advance_payment?"No Advance Payment":qa.value.advance_payment),1)])])])):r("",!0)]),c("div",Ae,[a[38]||(a[38]=c("button",{class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1)),qa.value&&!qa.value.is_cancelled?(o(),d("button",{key:0,class:"btn btn-danger",onClick:a[2]||(a[2]=e=>Xa(qa.value.tracking_number)),"data-bs-dismiss":"modal"}," Cancel Shipment ")):r("",!0)])])])]),a[79]||(a[79]=c("button",{id:"invoiceModalOpen","data-bs-toggle":"modal","data-bs-target":"#invoiceModal",style:{display:"none"}},"open",-1)),c("div",De,[c("div",Me,[c("div",Re,[a[44]||(a[44]=c("div",{class:"modal-header"},[c("h5",{class:"modal-title"},"Charges Breakdown"),c("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),c("div",Ne,[c("div",Te,[a[43]||(a[43]=c("div",{class:"invoice-title"},"Invoice",-1)),c("div",Pe,[a[39]||(a[39]=c("div",null,"Invoice #",-1)),c("div",Oe,u(at.value?.shipping_charges.invoice_cheque_no),1)]),c("div",$e,[a[40]||(a[40]=c("div",null,"Delivery Charges",-1)),c("div",null,u(at.value?.shipping_charges.delivery),1)]),c("div",ze,[c("div",null,"Fuel ("+u(at.value?.shipping_charges.fuel_surcharge_percentage)+"%)",1),c("div",null,u(at.value?.shipping_charges.fuel_surcharge_amount),1)]),c("div",Be,[c("div",null,"GST ("+u(at.value?.shipping_charges.gst)+"%)",1),c("div",null,u(at.value?.shipping_charges.gst_amount),1)]),c("div",Ee,[a[41]||(a[41]=c("div",null,"Govt Tax (4%)",-1)),c("div",null,u(at.value?.shipping_charges.tax_amount.toFixed(2)),1)]),c("div",Ie,[a[42]||(a[42]=c("div",null,"Total",-1)),c("div",null,u(at.value?.shipping_charges.gross_charges),1)])])]),a[45]||(a[45]=c("div",{class:"modal-footer"},[c("button",{class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close")],-1))])])]),Ba.value?r("",!0):(o(),d("div",Ye,[c("div",qe,[c("form",Fe,[c("div",Le,[c("div",je,[a[46]||(a[46]=c("label",null,[c("strong",null,"Date Range:")],-1)),y(c("input",{type:"text","onUpdate:modelValue":a[3]||(a[3]=e=>$a.dateRange=e),name:"daterange",id:"daterange",class:"form-control"},null,512),[[h,$a.dateRange]])]),c("div",He,[a[48]||(a[48]=c("label",null,[c("strong",null,"Status:")],-1)),y(c("select",{name:"status","onUpdate:modelValue":a[4]||(a[4]=e=>$a.status=e),id:"status",class:"form-control select2"},a[47]||(a[47]=[m('<option value="" data-v-b54c0c67>All Status</option><option value="Drop Off at Express Center" data-v-b54c0c67>Drop Off at Express Center</option><option value="Shipment Picked" data-v-b54c0c67>Shipment Picked</option><option value="Being Return" data-v-b54c0c67>Being Return</option><option value="Ready for Return" data-v-b54c0c67>Ready for Return</option><option value="Dispatched" data-v-b54c0c67>Dispatched</option><option value="Delivered" data-v-b54c0c67>Delivered</option><option value="Pending" data-v-b54c0c67>Pending</option><option value="Missroute" data-v-b54c0c67>Missroute</option><option value="Returned to shipper" data-v-b54c0c67>Returned to shipper</option><option value="Arrived at Station" data-v-b54c0c67>Arrived at Station</option><option value="Assign to Courier" data-v-b54c0c67>Assign to Courier</option><option value="Consignment Booked" data-v-b54c0c67>Consignment Booked</option><option value="Cancelled" data-v-b54c0c67>Cancelled</option><option value="Pickup Request Sent" data-v-b54c0c67>Pickup Request Sent</option><option value="48 Hours Auto Canceled" data-v-b54c0c67>48 Hours Auto Canceled</option><option value="Pickup Request not Send" data-v-b54c0c67>Pickup Request not Send</option>',17)]),512),[[f,$a.status]])])]),c("div",Ue,[c("div",Ke,[a[50]||(a[50]=c("label",null,[c("strong",null,"Origin City:")],-1)),c("select",We,[a[49]||(a[49]=c("option",{value:""},"All Origins",-1)),(o(!0),d(v,null,g(Oa.value,e=>(o(),d("option",{key:e.id+"-o",value:e.city},u(e.city),9,Ge))),128))])]),c("div",Ve,[a[52]||(a[52]=c("label",null,[c("strong",null,"Destination City:")],-1)),c("select",Ze,[a[51]||(a[51]=c("option",{value:""},"All Destinations",-1)),(o(!0),d(v,null,g(Oa.value,e=>(o(),d("option",{key:e.id+"-d",value:e.id},u(e.city),9,Je))),128))])])])])]),c("div",Xe,[c("div",{class:"d-flex justify-content-between align-items-center px-3 pt-3"},[a[53]||(a[53]=c("h5",{class:"card-header border-0 p-0"},"Manage Booked Packets",-1)),c("div",{class:"d-flex gap-2"},[c("button",{class:"btn btn-primary",onClick:Qa},"Bulk Slips")])]),Ea.value?(o(),d("div",Qe,a[54]||(a[54]=[c("div",{class:"loading-spinner"},null,-1),c("div",{class:"mt-3 text-muted"},"Fetching data...",-1)]))):r("",!0),c("div",ea,[c("table",aa,[c("thead",null,[c("tr",null,[c("th",ta,[c("input",{type:"checkbox",checked:Ya.value,onChange:Ja},null,40,la)]),a[55]||(a[55]=c("th",{style:{"font-size":"10px","padding-left":"5px","padding-right":"5px",width:"4%"}},"S.no",-1)),a[56]||(a[56]=c("th",{style:{"font-size":"10px","padding-left":"5px",width:"1%"}},"Order ID",-1)),a[57]||(a[57]=c("th",{style:{"font-size":"10px","padding-left":"0px"}},"Tracking",-1)),a[58]||(a[58]=c("th",{style:{"font-size":"10px","padding-left":"0px"}},"Status",-1)),a[59]||(a[59]=c("th",{style:{"font-size":"10px","padding-left":"0px"}},"Customer Name",-1)),a[60]||(a[60]=c("th",{style:{"font-size":"10px","padding-left":"0px",width:"15%"}},"Address",-1)),a[61]||(a[61]=c("th",{style:{"font-size":"10px","padding-left":"0px"},class:"text-center"},"COD",-1)),a[62]||(a[62]=c("th",{style:{"font-size":"10px","padding-left":"0px"},class:"text-center"},"Recieve Amount",-1)),a[63]||(a[63]=c("th",{style:{"font-size":"10px","padding-left":"0px"}},"Action",-1))])]),c("tbody",na,[(o(!0),d(v,null,g(k.value,(e,t)=>(o(),d("tr",{key:e.id},[c("td",ia,[c("input",{class:"row-check",type:"checkbox","data-id":e.id,checked:Ia.value.includes(e.id),onChange:a=>{return t=e.id,a.target.checked?Ia.value.includes(t)||Ia.value.push(t):Ia.value=Ia.value.filter(e=>e!==t),void n(()=>{const e=document.querySelectorAll("input.row-check"),a=Array.from(e).map(e=>Number(e.dataset.id)),t=a.length>0&&a.every(e=>Ia.value.includes(e));Ya.value=t});var t}},null,40,sa)]),c("td",da,u(t+1),1),c("td",oa,u(e.order_id),1),c("td",ca,[c("span",ra,u(e.tracking_number),1),a[64]||(a[64]=c("br",null,null,-1)),c("span",ua,u("N/A"==Ka(e.picking_time)?"Not Picked Yet":Ka(e.picking_time)),1)]),c("td",pa,[c("span",{class:b(["badge",et[e.is_cancelled?"Cancelled":e.status]]),onClick:a=>(e=>{tt.value=e,it(e.tracking_number),document.getElementById("statusModalOpen")?.click()})(e)},u(e.is_cancelled?"Cancelled":e.status||"—"),11,va),a[65]||(a[65]=c("br",null,null,-1)),c("span",ga,u("N/A"==Ka(e.last_activity)?"Status not changed yet":Ka(e.last_activity)),1)]),c("td",ma,[c("span",ba,u(e.consignee_name||"—"),1),a[66]||(a[66]=c("br",null,null,-1)),c("span",ya,u(e.consignee_phone||"-"),1)]),c("td",{style:{"font-size":"12px",width:"15%","padding-left":"0px"},"data-shipment-id":e.id},[c("div",{class:"address-container",onMouseenter:a=>{return t=e.id,void((l=e.consignee_address)&&l.length>50&&(Fa.value=t,n(()=>{Ga(t)})));var t,l},onMouseleave:a=>(e.id,void(Fa.value=null))},[c("span",{style:{"margin-bottom":"10px"},innerHTML:Wa(e.consignee_address)},null,8,xa)],40,fa),a[67]||(a[67]=c("br",null,null,-1)),c("span",_a,u(Oa.value.filter(a=>a.id==e.destination_city)[0]?.city??e.destination_city),1)],8,ha),c("td",ka,[c("span",Ca,u(Ua(e.cod_amount)),1),a[68]||(a[68]=c("br",null,null,-1)),c("span",wa,"DC "+u(Ua(e?.shipping_charges?.shipment_charges)),1)]),c("td",Sa,[c("span",{style:{cursor:"pointer","font-weight":"600"},onClick:a=>(e=>{at.value=e,document.getElementById("invoiceModalOpen")?.click()})(e)},u(Ua(e?.shipping_charges?.receivable)),9,Aa),a[69]||(a[69]=c("br",null,null,-1)),a[70]||(a[70]=c("span",{style:{"font-size":"10px","background-color":"#faf5ff",padding:"2px 5px","border-radius":"10px","margin-top":"20px",border:"1px solid #ede7f6",color:"#7e57c2"}},u("17-Mar-2025"),-1))]),c("td",Da,[c("button",{disabled:e.is_cancelled,onClick:a=>Xa(e.tracking_number),style:{color:"#dc3545",border:"none",background:"none",padding:"5px"}},a[71]||(a[71]=[c("i",{class:"ri-close-line text-[28px]",style:{color:"#dc3545"}},null,-1)]),8,Ma),c("button",{onClick:a=>(e=>{qa.value=e,document.getElementById("viewModalOpen")?.click()})(e)},a[72]||(a[72]=[c("i",{class:"ri-eye-line text-[28px]"},null,-1)]),8,Ra)])]))),128))])])])])])),Fa.value?(o(),d("div",{key:1,class:"address-tooltip",style:x({left:La.value[Fa.value]?.left+"px",top:La.value[Fa.value]?.top+"px"})},[c("div",Na,[a[73]||(a[73]=c("div",{class:"tooltip-header"},[c("i",{class:"ri-map-pin-line"}),c("span",null,"Full Address")],-1)),c("div",Ta,u(k.value.find(e=>e.id===Fa.value)?.consignee_address||"N/A"),1)]),a[74]||(a[74]=c("div",{class:"tooltip-arrow"},null,-1))],4)):(o(),d("div",Pa,a[75]||(a[75]=[c("span",{class:"loader"},null,-1)])))],64))}}),[["__scopeId","data-v-b54c0c67"]]);export{Oa as default};
